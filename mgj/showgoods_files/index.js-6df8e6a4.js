define("module/base",[],function(){window._getQueryString=function(a,n){var n=n||window.location.search;if(!a){var r=n.substring(1,n.length).split(/[&=]/),e={};return $.each(r,function(a,n){a%2===0&&(e[n]=r[a+1])}),e}var t=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),o=n.substr(1).match(t);return null!=o?unescape(o[2]):null},window._getWallParam=function(a){var n="",r=$('.param_container .ajax_param[param-name|="'+a+'"]');return r&&(n=r.val()),n},window._setWallParam=function(a,n){var r=$('.ajax_param[param-name|="'+a+'"]');r.length>0?r.val(n):$(".param_container").append('<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+n+'" />')},window._getWallAllParams=function(){var a={},n=$(".param_container").find(".ajax_param");return n.each(function(){var n=$(this);n.attr("param-name")&&(a[n.attr("param-name")]=n.val())}),a},window._setWallAllParams=function(a){$.map(a,function(a,n){_setWallParam(n,a)})},window._getCookie=function(a){var n,r=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(n=document.cookie.match(r))?unescape(n[2]):null},_setWallParam("_mgjuuid",_getCookie("__mgjuuid")),_setWallParam("userId",_getCookie("__ud_")),window._isEmptyObject=function(a){for(var n in a)return!1;return!0},window._getValueInObj=function(a,n){var r=$.map([].concat(n),function(n){var r=a,e=[];$.map(n.split(/\.|\[|\]|'|"/),function(a){""!==a&&e.push(a)});try{$.map(e,function(a){r=r[a]})}catch(t){window.console&&console.error&&console.error(t)}return r});return $.isArray(n)?r:r[0]}}),require(["module/base"],function(){});define("module/temp",function(){function a(a,t){return a+(t||"#common_goods_wall")}function t(a){return null===a||"undefined"==typeof a?"":a}window.handleMd5text=!1;var e={ajaxParams:function(a,t){return'<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+t+'" autocomplete="off">'},nav:{container:function(a,t){},sort:function(a,t){},definedPrice:function(a,t){},price:function(a,t){},tags:function(a,t){}},goods:{getGoodsHtml:function(a,t,e){},getWedgeImgHtml:function(a,t){},noGoods:function(a,t){}},pageTags:{dom:function(a,t){}}};e.nav.container=function(t){var e=t.result.wall,n=e.pager.url;if(n){var r=n.match("\\?[^/]*$","ig")?n.match("\\?[^/]*$","ig")[0].substr(1):"",s=n.replace(self.urlParams,""),o=new RegExp("#[\\w]+","ig"),l=i(o,r);""!==l&&"&"!==l.charAt(0)&&(l="&"+l),s=i(o,s);var c=a(s+l).replace("_page_","1"),p=t.result.param?t.result.param.ptpPartC:null;return['<form data-ptp-customc="'+p+'_tagList" action="'+c+'" class="price_custom" method="GET" >','<div class="sp_filter clearfix sort_nav">','<div class="nav_left fl clearfix">',"</div>",'<div class="nav_right fl clearfix">',"</div>","</div>","</form> "].join("")}},e.nav.sort=function(t,e){var i=t.result.sortList,n="";return $.each(i,function(t,i){n+='<a data-ptp-customc="'+e+'_sortList" sort-key="'+i.sortKey+'" class="sort fl" href="'+a(i.url)+'" data-mark="sort" tab-index="'+t+'">'+i.title+"</a>"}),""!==n?'<div class="sort_container fl">'+n+"</div>":""},e.nav.definedPrice=function(){return['<div class="price fl">','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="from" value="" name="minPrice">',"</div>",'<span class="divid">-</span>','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="to" value="" name="maxPrice">',"</div>",'<a class="sbt definedprice" href="#" data-mark="definedPrice">确定</a>',"</div>"].join("")},e.nav.price=function(t,i,n){var r=(e.nav,t.result.priceList),s="";return $.map(r,function(t,e){var r=n.replace("_minPrice_",t.min).replace("_maxPrice_",t.max);s+=['<li class="price_citem">',"<a data-ptp-customc='"+i+"_priceList' href='"+a(r)+"' data-mark='price'>"+t.min+"-"+t.max+"</a>","</li>"].join("")}),""!==s?'<ul class="price_choice fl">'+s+"</ul>":""};var i=function(a,t){var e=t.match(a);return e&&$.each(e,function(a){t=t.replace(e[a],"")}),t};e.nav.tags=function(a,i){var n=e.nav;n.urlParams=location.search;var r=a.result.tagList,s="",o=t(_getWallParam("tag"));return tagsStr=""===o?[]:o.split(","),$.map(r,function(a,t){var e=$.inArray(a.postkey,tagsStr)>=0?"checked":"";s+=['<a class="mgl" data-mark="tags" href="">',"<input "+e+' type="checkbox" value="'+a.postkey+'">','<label for="tag'+a.postkey+'">'+a.name+"</label>","</a>"].join("")}),['<div class="nav_inner fl">','<span class="nav_more"></span>','<div class="filters">','<input type="hidden" class="tagStr" value="" name="tag" data-ptp-customc="'+i+'_tagList">',s,"</div>","</div>"].join("")},e.goods={getItemHtml:function(a,t,e){if(a.type)switch(a.type){case 1:return this.getWedgeImgHtml(a,e);case 2:return this.getGoodsHtml(a,t,e);default:return!1}return this.getGoodsHtml(a,t,e)},getGoodsHtml:function(a,t,e,i){var n="";if($.each(a.leftbottom_taglist||[],function(a,t){n+='<img src="'+t+'" alt="" class="tagImage" style=""/>'}),1===a.activity)var r='<img src="'+a.activity_img+'" style="">';else if(a.lefttop_taglist){var r="",s=.5;$.each(a.lefttop_taglist,function(a,t){r+='<img src="'+t.img+'" style="width:'+Math.round(t.w*s)+'px;height:auto;">'})}var o="";return a.hasSimilarity&&(o=['<a class="likeLink" href="'+a.similarityUrl+'" target="_blank">找相似&nbsp;','<img src="http://s16.mogucdn.com/p1/151209/upload_ie3wmyrvhftdmyzvguzdambqgayde_7x13.png">',"</a>"].join("")),a.link.indexOf("acm")<0&&(a.link=a.link+(a.link.indexOf("?")>0?"&":"?")+"acm="+a.acm+"-"+i),['<div class="iwf" data-tradeitemid="'+a.tradeItemId+'">',o,'<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox loading_bg_120" target="_blank"  img-src="'+a.img+'" need-remove="no" data-ptp-customc="'+e+t+'" >',r?'<span class="icon_event_lefttop iwf_icon_taglist">'+r+"</span>":"","</a>",'<a rel="nofollow" target="_blank" href="'+a.link+'" class="goods_info_container">','<p class="title fl" style="',""===n?"height:44px;":"height:22px; white-space: nowrap; text-overflow: ellipsis;",'">'+a.title+"</p>",""!==n?'<p class="icon_event_leftBottom">'+n+"</p>":"",'<div class="goods_info fl">','<b class="price_info yahei">¥'+a.price+"</b>",'<span class="fav_num fr">'+a.cfav+'<img src="http://s18.mogucdn.com/p1/160427/upload_ie4tcmjqgjrwczbshazdambqgqyde_16x15.png" alt=""></span>',"</div>","</a>","</div>"].join("")},getWedgeImgHtml:function(a,t){return['<div class="iwf">','<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox" target="_blank" suffix-model="orig_narrow" ','img-src="'+a.image+'" need-remove="no" data-ptp-customc="'+t+'_wall_mait_source" style="width:100% !important;height:100% !important;">',"</a>","</div>"].join("")},noGoods:function(){return['<div class="selection_box search_noresult">',"<p>筛选条件太多啦，未找到相关结果</p>",'<a href="javascript:;" onclick="if(window.history){history.back();}else{self.location=document.referrer;}" class="backlast">点击返回上一步</a>',"</div>"].join("")},noMore:function(){return'<div id="like_list_nomore"><div>没有更多啦~</div></div>'},searchNoGoods:function(a){return['<div class="selection_box search_noresult">','<p class="search_nr_img"><img src="http://s18.mogucdn.com/p1/150917/upload_ieztizdegrsdkmlcgmzdambqgyyde_100x100.png"></p>','<p class="search_nr_desc">没有找到与“<span>'+a+"</span>”相关的商品</p>","</div>"].join("")}},e.pageTags.dom=function(a,t){var i=e.pageTags,r=n(t),s=a.result;i.nowPageNo=parseInt(_getWallParam("page"))||parseInt(_getQueryString("page"));var o=parseInt(s.wall.pager.total),l=parseInt(s.wall.pager.perPage);if(i.nowPageNo&&o&&l){var c=Math.ceil(o/l);c=c>100?100:c;var p,d,g="";if(i.nowPageNo>1&&(g+=r(i.nowPageNo-1,"&lt;")),7>c){p=1,d=c;for(var m=p;d>=m;m++)g+=r(m,m)}else{g+=r(1,1),i.nowPageNo>=1&&i.nowPageNo<=3?(p=2,d=5):i.nowPageNo>=c-2&&i.nowPageNo<=c?(p=c-4,d=c-1):(p=i.nowPageNo-2,d=i.nowPageNo+2),p>2&&(g+="<i>...</i>");for(var m=p;d>=m;m++)g+=r(m,m);c-1>d&&(g+="<i>...</i>"),g+=r(c,c)}return i.nowPageNo<c&&(g+=r(i.nowPageNo+1,"下一页&gt;")),'<div class="pagination pd_tb" style="display:none;">'+g+"</div>"}};var n=function(a){var t=e.pageTags;return function(e,i){var n=a.replace(/(_page_)/gi,e),r=e===t.nowPageNo?"c":"";return"<a href='"+n+"' rel='nofollow' class="+r+">"+i+"</a>"}};return MoGu.wall=MoGu.wall||{},MoGu.wall.temp=MoGu.wall.temp||e,e});define("module/lazy-load",function(){function e(){if(!a)return!1;var e=new Image;e.onload=function(){e.width>0&&e.height>0;MOGU.isSupportWebp=!0},e.onerror=function(){MOGU.isSupportWebp=!1},e.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="}window.handleMd5text=!1;var i=navigator.userAgent,t=i.indexOf("MSIE")>0,n=t?300:100,a=i.match(/Chrome\/([\d.]+)/);MOGU.isSupportWebp=!1;var r=$.browser.msie&&"6.0"==$.browser.version&&!$.support.style;e();var o=Date.now||function(){return(new Date).getTime()},x=function(e){this.opts=$.extend({},this.defaults,e),this.init(),this.imgQuality=70,this.imgKeyArr=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],this.imgKeyMap={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},this.dpr=window.devicePixelRatio>=1?window.devicePixelRatio:1,this.dprDefMaxWidth=640,this.dprDefRatio="999",this.fistCheck=!1};x.prototype={init:function(){var e=this,i=null,t=o();$(window).scroll(function(r){clearTimeout(i),i=setTimeout(function(){if(a)e.checkImages();else{var i=o();i-t>n&&(t=i,e.checkImages())}},200)}),setTimeout(function(){e.fistCheck=!0,e.checkImages()},0)},checkImages:function(e){var i=e?e:$("body"),t=this;if(t.fistCheck)for(var n=document.documentElement.scrollTop||document.body.scrollTop,a=t.opts.showDistance,r=n-a,o=n+(document.documentElement.clientHeight||document.body.clientHeight)+a,x=i.find("."+t.opts.objsClassName),s=x.length,d=0;s>d;d++){var f=x.eq(d);if(f.attr("img-src")){var c=f.find(".J_dynamic_img"),g=f.hasClass("J_loading"),l=f.attr("need-remove")?f.attr("need-remove"):"no";if(!c.length||"yes"==l){var u="none"!=f.css("display")&&"hidden"!=f.css("visibility")&&0!=f.css("opacity")&&f[0].offsetWidth,m=f.offset().top,p=m+f.height(),h=p>=r&&o>=m;u&&h?c.length||g||(f.addClass("J_loading"),t.loadingImage(f)):"yes"==l&&(c.length||g)&&(f.removeClass("J_loading"),c.remove())}}}},loadingImage:function(e){var i=this;i.addSuffix(e);var t=new Image,n=e.attr("img-src");t.src=i.getWebpUrl(n),t.complete?i.insertImg(t,e):t.onload=function(){i.insertImg(t,e)}},insertImg:function(e,i){i.hasClass("J_loading")&&(i.removeClass("J_loading"),r?i.append('<img class="J_dynamic_img fill_img" src="'+e.src+'" alt=""/>'):(i.append('<img class="J_dynamic_img fill_img" style="display:none;" src="'+e.src+'" alt=""/>'),i.find(".J_dynamic_img").fadeIn(300)))},getWebpUrl:function(e){var i="_999x999.v1c0.";if(!e||e.indexOf(".jpg")<0||e.indexOf(".webp")>0||e.indexOf(".png")>0||e.indexOf(".gif")>0)return e;if(e.indexOf(".jpg_")<0&&e.indexOf(".jpg")==e.length-4&&(e+=i+"jpg"),!MoGu.isSupportWebp)return e;if(e.indexOf(".jpg_")>0){var t=e.split(".");if("jpg"==t[t.length-1])return t[t.length-1]="webp",t.join(".")}return e},getGoodsDprCode:function(e){var i=this,t="",n=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":t=e.attr("suffix-ratio");break;default:t=i.dprDefRatio,n=".v1c96"}var a=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*i.dpr;(!a||0>a||a>i.dprDefMaxWidth)&&(a=i.dprDefMaxWidth);for(var r=0;r<i.imgKeyArr.length;r++){var o=i.imgKeyArr[r];if(o>=a||o==i.dprDefMaxWidth)return i.imgKeyMap[o][t]+n}return!1},addSuffix:function(e){var i=this,t=e.attr("suffix-model"),n="",a="."+i.imgQuality+".";switch("no"==e.attr("add-quality")&&(a="."),t){case"add_code":n=$.trim(e.attr("suffix-code"));break;case"orig_narrow":window.devicePixelRatio<2&&(n="50000x50000.v1c7E");break;case"goods_dpr":n=i.getGoodsDprCode(e);break;default:return!1}e.attr("suffix-model","end");var r=e.attr("img-src");if(!r||!n||r.indexOf(".webp")>0||r.indexOf(".gif")>0)return!1;if(n="_"+n,r.indexOf(".jpg")<0&&r.indexOf(".png")<0)return!1;if(r.indexOf(".jpg_")>0||r.indexOf(".png_")>0)return!1;var o="",x=r.split(".");if("jpg"==x[x.length-1])o="jpg";else{if("png"!=x[x.length-1])return!1;o="png"}return e.attr("img-src",r+n+a+o),!0},defaults:{objsClassName:"J_dynamic_imagebox",showDistance:0}},window.MoGu=window.MoGu||{};var s=MoGu.dynamicImage;return s||(s=new x({showDistance:$(window).height()}),MoGu.dynamicImage=s),s}),require(["module/lazy-load"],function(e){});define("module/WallExposeLog",function(){window.handleMd5text=!1;var t=function(t){var e="",a=$('#wall_goods_box .ajax_param[param-name|="'+t+'"]');return a&&(e=a.val()),e};window.MoGu=window.MoGu||{};var e=function(t){window.console&&console.log&&console.log(t)},a=function(){var t=MoGu.mgVersion||MoGu.fn&&MoGu.fn.getAppVersion&&MoGu.fn.getAppVersion()||0;this.ver=t>0?t:"",this._mgjuuid=this.getCookie("__mgjuuid"),this.acms=[],this.cpcs=[],this.iids=[],this.indexs=[],this.cparams=[],this.ptpPartC="",this.eventid="70001",this.cpceventid="70004",this.fcid="",this.tabClickId="000000001",this.defaultPos=0};return a.prototype.getBaseParams=function(t){var e=this;e.ptpPartC=t.param.ptpPartC,e.eventid=t.param.eventId||"70001",e.cpceventid=t.param.cpcEventId||"70004",e.fcid=t.param.fcid||""},a.prototype.resetBaseParams=function(){var t=this;t.ptpPartC="",t.eventid="",t.fcid="",t.acms=[],t.cpcs=[],t.iids=[],t.indexs=[],t.cparams=[],t.defaultPos=0},a.prototype.getCookie=MoGu.fn&&MoGu.fn.getCookie||MoGu.util&&MoGu.util.getCookie||function(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?unescape(e[2]):null},a.prototype.collectItemData=function(t,e){var a=this;a.acms.push(t.acm+"-"+e),a.iids.push(t.tradeItemId),a.indexs.push(e),t.cparam&&(a.cpcs.push(t.tradeItemId),a.cparams.push(t.cparam))},a.prototype.collectListData=function(t){var e=this;t&&t.length>0&&$.each(t,function(t,a){e.collectItemData(a,e.defaultPos++)})},a.prototype.pushAcmLog=function(){var t=this,a={ver:t.ver,ptpPartC:t.ptpPartC,eventid:t.eventid,fcid:t.fcid,_mgjuuid:t._mgjuuid,acms:t.acms,cpcs:t.cpcs,iids:t.iids,indexs:t.indexs};t.iids.length?(e("触发图墙曝光打点"),e(a),t.pushLog(a,t.eventid)):e("没有图墙数据，无法触发商品打点"),t.acms=[],t.cpcs=[],t.iids=[],t.indexs=[]},a.prototype.pushCpcLog=function(){var t=this,a={ver:t.ver,ptpPartC:t.ptpPartC,eventid:t.cpceventid,fcid:t.fcid,_mgjuuid:t._mgjuuid,cparams:t.cparams};t.cparams.length?(e("触发cpc商品曝光打点."),e(a),t.pushLog(a,t.cpceventid)):e("没有cpc商品数据，无法触发cpc曝光打点"),t.cparams=[]},a.prototype.pushTabClickLog=function(a){var o=this,i={tableName:a.attr("tab-name")||a.text()||"",fcid:a.attr("tab-fcid")||t("fcid")||"",q_:t("q")||"",index:parseInt(a.attr("tab-index"),10)>=0?a.attr("tab-index"):"",labelName:a.attr("tab-label")||""};e("触发tab点击E事件"),e(i),o.pushLog(i,o.tabClickId)},a.prototype.pushLog=function(t,a){setTimeout(function(){if(window.logger&&logger.log)try{logger.log(a,t)}catch(o){e(o)}else if(window.detePtp&&detePtp.logFromtSend){var i=window.detePtp._collectParams||{};t.ptp_cnt=i.ptp_cnt||"",t.ptp_url=i.ptp_url||"",t.ptp_ref=i.ptp_ref||"";try{detePtp.logFromtSend("e",a,t)}catch(o){e(o)}}},1e3)},a.prototype.scrollAjaxPushLog=function(t){var e=this;e.getBaseParams(t),e.collectListData(t.wall.docs),e.pushAcmLog(),e.pushCpcLog()},MoGu.WallExposeLog=a,a}),require(["module/WallExposeLog"],function(t){});define("module/ajaxHistory",function(){var t={},o={},a={};return a={init:function(n){$(".do_not_use_historyapi").length>0||(t=$.extend(!0,{},{jumpTargXOffset:null,wallListener:!1,barStyle:"",filter:{loadingBox:".topLoading",bar:".topLoading .bar",container:"body",goodsBox:".common_goods_wall",dataUrlDom:[".nav_container a"].join(","),goodsBox:".common_goods_wall",jumpTarg:"#wall_goods_box",listenRange:"#wall_goods_box"}},n),o={goodsBox:$(t.filter.goodsBox),jumpTarg:$(t.filter.jumpTarg),container:$(t.filter.container),$bar:null},a.replaceState({},"",location.href),o.container.append(a.barHtml()),o.$box=$(t.filter.loadingBox),o.$bar=$(t.filter.bar),t.wallListener&&a.startWallListener(),a.listener())},pageScrollTo:function(n,e){n=n||o.jumpTarg,e=e||t.jumpTargXOffset||a.getFixSearchBarOffset(),n&&window.scrollTo(0,n.offset().top+e)},pushState:function(t,o,a){history.pushState(t,o,a)},replaceState:function(t,o,a){history.replaceState(t,o,a)},reLoadInitData:function(t){o.goodsBox.trigger("needReloadInitData",t)},getFixSearchBarOffset:function(){return o.fixSearchBarOffset||(o.fixSearchBarOffset=$("#J_sticky_container").length>0?-$("#J_sticky_container").height():null),o.fixSearchBarOffset},listener:function(){var o=this;$("body").on("click",t.filter.dataUrlDom,function(t){t.preventDefault(),o.pageScrollTo(),o.pushState({},"",$(this).attr("href")),o.reLoadInitData()}),window.onpopstate=function(t){t.state&&(a.pageScrollTo(),o.reLoadInitData(_isEmptyObject(t.state)?null:{data:t.state}))}},barHtml:function(){return['<div class="topLoading" style="display: none">','<div class="bar" style="'+t.barStyle+'"></div>',"</div>"].join("")},showBox:function(t){t=t||o.$box,t.show()},hideBox:function(t){t=t||o.$box,t.hide()},progress:function(t,a,n){if(t){var e=o.$bar,a=a||300,i=null,r=null;e.stop(),t instanceof Array?t.length>1?(i=t[0],r=t[1]):r=t[0]:r=t,null!==i&&e.css("width",i+"px"),e.animate({width:r+"%"},a,"linear",function(){n&&"function"==typeof n&&n()})}},startWallListener:function(){var o=$(t.filter.listenRange);$.map(this.wallListener,function(a,n){o.on(n,t.filter.goodsBox,function(t){a(t,arguments)})})},wallListener:{loadInitDataStarted:function(t,arguments){a.showBox(),a.progress([0,45],null,function(){a.progress(55,1e4)});var o=arguments[1];a.replaceState(o,null,location.href)},loadInitDataCompleted:function(t,arguments){a.progress(100,null,function(){a.hideBox()})}}},MoGu.wall=MoGu.wall||{},MoGu.wall.history=MoGu.wall.history||a,a});define("module/wall-mod",["module/WallExposeLog","module/temp"],function(a,e){function n(a,e){return a+(e||"#common_goods_wall")}function t(a){var e={};return $.map(a,function(n,t){""===a[t]&&null===a[t]&&"undefined"==typeof a[t]||(e[t]=a[t])}),e}window.handleMd5text=!1,MoGu.wall=MoGu.wall||{};var o={temp:e,ptpCVal:0,ajaxUrlDom:$(".ajax_url"),dot:new a,cache:{},goodsBoxHeight:"1500px",goodsPerRow:$("body").hasClass("media_screen_960")?4:5,keyStage:["wallInitStarted","loadInitDataFromCache","loadInitDataStarted","loadInitDataSucceed","loadInitDataCompleted","goodsRendered","allGoodsRendered"]},r={filter:{goodsBoxContainer:"#wall_goods_box",goodsBox:"#common_goods_wall",searchConditionBox:"#search_condition_box",paramContainer:".param_container",navContainer:".nav_container",pageContainer:".page_container",listenRange:"#wall_goods_box",noResult:".search_noresult"}};Fn={};var i={};return i.init=function(a){i.initEnviroment(a),i.keyStageFunc.wallInitStarted(),i.loadInitData(i.loadInitCallBack)},i.initEnviroment=function(a){i.overrideConf(a),i.initCommonVar(),i.event.start(),i.startWallListener()},i.initKeyStageFunc=function(){i.keyStageFunc={},$.each(o.keyStage,function(a,e){i.keyStageFunc[e]=function(){Fn.trigger(e,arguments)}})},i.initCommonVar=function(){o=$.extend(!0,{},o,{goodsBoxContainer:$(r.filter.goodsBoxContainer),goodsBox:$(r.filter.goodsBox),searchConditionBox:$(r.filter.searchConditionBox),paramContainer:$(r.filter.paramContainer),navContainer:$(r.filter.navContainer),pageContainer:$(r.filter.pageContainer)})},i.storeCommonVarFromInitData=function(a){var e=a.result,n=e.wall;o=$.extend(!0,{},o,{ptpWallDoc:e.param?e.param.ptpWallDoc:"",ptpWallCpc:e.param?e.param.ptpWallCpc:"",ptpCVal:e.param?e.param.ptpPartC:"",pageTagHref:n.pager?n.pager.url:null,priceUrl:e.priceUrl,sectionEnd:n.isEnd,book:n.book})},i.overrideConf=function(a){r=$.extend(!0,{},r,a)},i.makeDataKey=function(a){var e=[];return a&&$.map(a,function(a,n){e.push(n+"="+a)}),location.href+"?"+e.join("&")},i.loadInitData=function(a,e){o.ajaxUrl=o.ajaxUrlDom.length>0?o.ajaxUrlDom.val():"";var n=e&&e.data||t(_getWallAllParams()),r=i.makeDataKey(n),a=e&&e.callback||a;o.cache[r]?(i.keyStageFunc.loadInitDataFromCache(n,r),a(o.cache[r])):(i.keyStageFunc.loadInitDataStarted(n),$.ajax({url:o.ajaxUrl,type:"get",timeout:12e3,dataType:"jsonp",jsonp:"callback",data:n,success:function(e){e.status&&1001==e.status.code&&a?(o.cache[r]=e,a(e)):i.render.goods.noGoods(),i.keyStageFunc.loadInitDataSucceed(n,e)},complete:function(){i.keyStageFunc.loadInitDataCompleted(n)},error:function(a){}}))},i.loadInitCallBack=function(a){var e=a.result;e.wall;e&&(i.storeCommonVarFromInitData(a),i.setGoodsSize(),i.render.nav.main(a),i.render.goods.info(a),i.render.pageTag.init(a),i.loadGoodsCallBack(a),o.goodsBox.css("height",""),i.render.goods.noGoods(),i.keyStageFunc.allGoodsRendered(a))},i.setGoodsSize=function(){},i.resetWall=function(){o.dot.resetBaseParams(),_setWallAllParams({book:"",page:"1",section:"0",minPrice:"",maxPrice:"",sort:"pop"}),o.pageTagDom=null,o.goodsBox.html(""),o.sectionEnd=!1,o.goodsBox.css("height",o.goodsBoxHeight)},i.startWallListener=function(){var a=$(r.filter.listenRange);$.map(i.wallListener,function(e,n){a.on(n,r.filter.goodsBox,function(a){e(a,arguments)})})},i.wallListener={needReloadInitData:function(a,e){i.resetWall(),i.event.setParamByUrl(),e=e[1],i.loadInitData(i.loadInitCallBack,e)}},i.loadGoodsCallBack=function(a){var e=a.result||a;e.param&&(_getWallParam("sort")||"pop")===e.param.sort&&(e.wall.docs&&e.wall.docs.length>0&&i.render.goods.init(e),o.pageTagDom&&o.pageTagDom.show())},i.dealLastRowWhenAllGoodsRendered=function(){var a=$("body").hasClass("media_screen_960")?4:5,e=$(".iwf").length,n=e%a;a>n&&e>=10&&$.each(n,function(){$(".J_scroll__V.wallBox .iwf").last().remove()})},i.render={},i.render.nav={main:function(a){if(a.result.wall.pager){var e=i.render.nav;e.container(a)}},container:function(a){var e=i.render.nav,n=o.temp.nav.container(a);o.navContainer.html(n),o.navForm=$(".price_custome"),o.navLeft=$(".sort_nav .nav_left"),o.navRight=$(".sort_nav .nav_right"),e.sort(a),e.definedPrice(a),e.price(a),e.tags(a)},sort:function(a){Fn._append(o.navLeft,o.temp.nav.sort(a,o.ptpCVal));var e=_getWallParam("sort")||_getQueryString("sort");o.navLeft.find('.sort[sort-key|="'+e+'"]').addClass("on")},definedPrice:function(a){a.result.priceUrl&&(Fn._append(o.navLeft,o.temp.nav.definedPrice(a)),o.priceNav=o.navLeft.find(".price"),o.priceNav.find(".from").val(_getWallParam("minPrice")||_getQueryString("minPrice")),o.priceNav.find(".to").val(_getWallParam("maxPrice")||_getQueryString("maxPrice")))},price:function(a){a.result.priceUrl&&a.result.priceList&&Fn._append(o.navLeft,o.temp.nav.price(a,o.ptpCVal,o.priceUrl))},tags:function(a){a.result.tagList&&a.result.tagList!=={}&&Fn._append(o.naVaright,o.temp.nav.tags(a,o.ptpCVal))}},i.render.goods={init:function(a){if(null!=o.goodsBox){var e=this,n=e.goodsHtml(a);Fn._append(o.goodsBox,n),i.keyStageFunc.goodsRendered(a)}},goodsHtml:function(a){var e=a.wall.docs,n="",t=0;return o.dot.getBaseParams(a),$.each(e,function(a,e){if(o.dot.collectItemData(e,t),e.type&&"mait_source"===e.type)n+=o.temp.goods.getWedgeImgHtml(e,o.ptpCVal);else if(e){var r="";e.cparam?(r=o.ptpWallCpc,o.dot.cparams.length%9===0&&o.dot.cparams.length>0&&o.dot.pushCpcLog()):r=o.ptpWallDoc,n+=o.temp.goods.getGoodsHtml(e,r,o.ptpCVal,t)}(t+1)%45===0&&t>0&&o.dot.pushAcmLog(),t++}),o.dot.cparams.length>0&&o.dot.pushCpcLog(),o.dot.indexs.length>0&&o.dot.pushAcmLog(),n},info:function(a){},noGoods:function(a){var e=$(".iwf").length;0===e&&(o.noResult=$(r.filter.noResult),0===o.noResult.length?o.goodsBox.html(a||o.temp.goods.noGoods()):o.noResult.show(),o.goodsBox.css("height",""),o.pageContainer.html(""))}},i.render.pageTag={init:function(a){if(a.result.wall.pager&&!(o.pageTagDom&&o.pageTagDom.length>0)){var e=o.temp.pageTags.dom(a,o.pageTagHref);o.pageContainer.html(e),o.pageTagDom=$(".pagination")}}},i.event={start:function(){i.event.nav.container(),i.event.pagination()},setParamByUrl:function(a,e){var n=_getQueryString(a,e);_setWallAllParams(n)},nav:{container:function(){var a=["sort","definedPrice","price","tags"],e=i.event.nav;$(".wall_goods_box").on("click",".price_custom a",function(n){var t=$(this),o=t.attr("data-mark");$.each(a,function(a,r){o===r&&e[r](t,n)})}),$("body").on("keydown",".price_custom input",function(a){13===a.keyCode&&o.priceNav.find(".sbt")[0].click()})},sort:function(a){a.addClass("on").siblings().removeClass("on"),o.dot.pushTabClickLog(a)},definedPrice:function(a,e){var t=o.priceNav.find(".from").val().replace(/[^\d]/gi,""),r=o.priceNav.find(".to").val().replace(/[^\d]/gi,"");if(parseInt(t||0)>parseInt(r||0))return alert("价格上限不能低于价格下限"),e.preventDefault(),void e.stopPropagation();var i=n(o.priceUrl.replace("_minPrice_",t).replace("_maxPrice_",r));a.attr("href",i)},price:function(a){var e=a.text().split("-"),n=o.priceNav.find(".from"),t=o.priceNav.find(".to");n.val(e[0]),t.val(e[1])},tags:function(){var a=$(this).find("input").val(),e=i.event.nav.makeTagStr(a);setParamInPage("tags",e)},makeTagStr:function(a){var e=nullToEmptyStr(getParamInPage("tag")),n=""===e?[]:e.split(",");return $.inArray(a,n)>=0?n.splice($.inArray(a,n),1):n.push(a),n.join(",")}},pagination:function(){$(".page_container").on("click","a",function(){$(this).addClass("c").siblings().removeClass("c")})}},Fn.trigger=function(a,e,n){n=n||o.goodsBox,n.trigger(a,e)},window._append=Fn._append=function(a,e){a&&a.append(e)},i.initKeyStageFunc(),i.Common=o,i.Conf=r,MoGu.wall=i,i});require(["module/wall-mod","module/ajaxHistory","module/lazy-load"],function(o,t,e){window.handleMd5text=!1;var n={goodsBoxFilter:".common_goods_wall",goodsBoxContainerFilter:"#wall_goods_box"},i={$body:$("body"),goodsBox:$(n.goodsBoxFilter),goodsBoxContainer:$(n.goodsBoxContainerFilter)},a={startWallListener:function(o){$.map(o,function(o,t){i.$body.on(t,n.goodsBoxFilter,function(t){t.stopPropagation(),o()})})}};a.startWallListener({goodsRendered:function(){e.checkImages()}}),navigator.userAgent.match(/Chrome\/([\d.]+)/)&&window.history&&history.pushState&&t.init({wallListener:!0}),o.init()});