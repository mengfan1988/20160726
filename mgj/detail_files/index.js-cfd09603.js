!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pc/pages/normal/index",[],e):"object"==typeof exports?exports["pc/pages/normal/index"]=e():t["pc/pages/normal/index"]=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";i(1),i(2),i(3);var n=i(6),a=i(21);n.init(),a.init()},function(t,e,i){"use strict"},function(t,e){"use strict";window.MOGU=window.MOGU||{},function(t,e){var i={};i.Util={mask:function(){var e=t(".light_box_fullbg");e.length<=0&&(e=t(['<div class="light_box_fullbg"></div>'].join("")),t("body").append(e))},show:function(e,i){var n,a,s,o=t("#vp_wrap"),r=t(".light_box_fullbg").eq(0);o.length<=0&&(o=t(['<div class="vp_wrap" id="vp_wrap">','<h5 class="vp_t"></h5>','<a href="javascript:;" class="vp_cls">×</a>','<div class="v_pop_box"></div>',"</div>"].join("")),t("body").append(o),r.off("click").on("click",function(){clearTimeout(s),o.addClass("vp_shake"),s=setTimeout(function(){o.removeClass("vp_shake")},500)})),i.isShowCloser?o.find(".vp_cls").show():o.find(".vp_cls").hide(),o.find(".vp_t").html(i.title),a={alert:function(e){return n=t(".vp_alert"),n.length<=0?n=t(['<div class="vp_alert vp_inner">','<p class="vp_cnt"></p>','<a href="javascript:;" class="vp_btn vp_btn_'+e.btn.theme+' vp_ok">'+e.btn.text+"</a>","</div>"].join("")):n.find(".vp_btn").removeClass("vp_btn_red").removeClass("vp_btn_normal").addClass("vp_btn_"+e.btn.theme).html(e.btn.text),n.show().find(".vp_cnt").html(e.content),n},confirm:function(e){if(n=t(".vp_cfm"),n.length<=0)n=t(['<div class="vp_cfm vp_inner">','<p class="vp_cnt"></p>','<a href="javascript:;" class="vp_btn vp_btn_'+e.btn1.theme+' vp_ok">'+e.btn1.text+"</a>",'<a href="javascript:;" class="vp_btn vp_btn_'+e.btn2.theme+' vp_cancel">'+e.btn2.text+"</a>","</div>"].join(""));else{var i=n.find(".vp_btn");i.removeClass("vp_btn_red").removeClass("vp_btn_normal"),i.eq(0).addClass("vp_btn_"+e.btn1.theme).html(e.btn1.text),i.eq(1).addClass("vp_btn_"+e.btn2.theme).html(e.btn2.text)}return n.show().find(".vp_cnt").html(e.content),n}},o.find(".v_pop_box").append(a[e](i)),o.css({display:"block",opacity:0}).css({"margin-left":-o.width()/2-1,"margin-top":-o.height()/2-1,opacity:1}),r.show()},close:function(e,i){t(".light_box_fullbg").eq(0).hide(),t("#vp_wrap").find(".vp_inner").hide().end().hide(),void 0!==i&&"function"==typeof i&&i(e)}},t.alert=function(e,n,a){var s=t.extend(!0,{title:"提示",content:e,btn:{text:"确定",theme:"red",val:void 0},isShowCloser:!0,close_val:void 0},a),o=function(){t("#vp_wrap").off("click").on("click",".vp_ok",function(t){t.preventDefault(),i.Util.close(s.btn.val,n)}).on("click",".vp_cls",function(t){t.preventDefault(),i.Util.close(s.close_val,n)})};!function(){i.Util.mask(),i.Util.show("alert",s),o()}()},t.confirm=function(e,n,a){var s=t.extend(!0,{title:"提示",content:e,btn1:{text:"确定",theme:"red",val:!0},btn2:{text:"取消",theme:"normal",val:!1},isShowCloser:!0,close_val:!1},a),o=function(){t("#vp_wrap").off("click").on("click",".vp_ok",function(t){t.preventDefault(),i.Util.close(s.btn1.val,n)}).on("click",".vp_cancel",function(t){t.preventDefault(),i.Util.close(s.btn2.val,n)}).on("click",".vp_cls",function(t){t.preventDefault(),i.Util.close(s.close_val,n)})};!function(){i.Util.mask(),i.Util.show("confirm",s),o()}()},e.MOGU.alert=t.alert,e.MOGU.confirm=t.confirm}(jQuery,window)},function(t,e,i){"use strict";i(4),i(5)},function(t,e){"use strict";!function(t){var e=t(document),i=t("#shopBaseUrl").val();t("#shopBaseUrlSec").length>0&&""!=t("#shopBaseUrlSec").val()&&(i=t("#shopBaseUrlSec").val());var n=(t(".J-shop-follow").data("shopid"),n||{});n.domEvent=function(){var n=function(){if(t(".shop-header .user-info .shop-info-content").length||t(".shop-header .user-info").hasClass("hover"))return t(".shop-header .user-info").addClass("hover"),!1;var e=['<div class="shop-info-content clearfix">','<div class="info-box fl">','<ol class="li li3">',"{{? it.shopInfo.area }}",'<li><span class="tag">所在地区：</span>{{=it.shopInfo.area}}</li>',"{{?}}",'<li><span class="tag">商品数：</span>{{=it.itemTotal}}</li>','<li><span class="tag">收藏数：</span>{{=it.shop_befaved_num}}</li>','{{?it.saleTotal != "hidden"}}','<li><span class="tag">销售量：</span>{{=it.saleTotal}}</li>',"{{?}}",'<li><span class="tag">创建时间：</span>{{=it.shopInfo.enterTime}}</li>','{{?it.deposit != "hidden" && it.deposit > 0}}','<li><span class="tag">店铺保证金：</span>已缴纳</li>',"{{?}}","{{?it.shopType == 1}}",'<li><img class="shop-individual-licen" src="{{=it.idenImg}}" alt="" /></li>',"{{??it.shopType == 2}}",'<li class="company-info clearfix"><span class="tag">公司名：</span><div class="c-name">{{=it.companyName}}</div></li>','<li><span class="tag">工商执照：</span><a class="shop-company-licen" href="{{=it.companyLicense}}" target="_blank"><img src="{{=it.idenImg}}" alt="" /></a></li>',"{{?}}",'<li class="tc mt10"><a class="go-detail" href="{{=it.shopBaseUrl}}/credit" target="_blank" rel="nofollow">查看详情</a></li>',"</ol>","</div>",'<ol class="li li1">','<li class="title">动态评分</li>',"{{ $.each(it.dsrArr, function(index, dsrArr){ }}",'<li>{{=dsrArr}}：<span {{?it.dsr["pk"][index] == 1}} class="num" {{??}}class="low"{{?}}>',"{{=it.dsr.shop[index]}}","</span></li>","{{});}}","</ol>",'<ol class="li li2">','<li class="title">比同行平均</li>',"{{ $.each(it.dsrArr, function(index, dsrArr){ }}",'{{?it.dsr["pk"][index] == 1}}','<li><span class="tag up">高</span><span class="num">{{=it.dsr["average"][index]}}</span></li>',"{{??}}",'<li><span class="tag down">低</span><span class="num">{{=it.dsr["average"][index]}}</span></li>',"{{?}}","{{});}}","</ol>",'<ol class="li li4">','<li class="title"> 本店 </li>','<li>平均发货时间：<span {{if(it.dsr["service"]["shopShip"] > it.dsr["service"]["averageShip"]){}}class="low" {{}else{}}class="num"{{}}} >{{=it.dsr["service"]["shopShip"]}}</span>天</li>','<li>退货率：<span {{? it.dsr["service"]["shopBack"] > it.dsr["service"]["averageBack"]}}class="low"{{??}}class="num"{{?}} >{{=it.dsr["service"]["shopBack"]}}</span>%</li>','<li>有效投诉率：<span {{? it.dsr["service"]["shopComplain"] > it.dsr["service"]["averageComplain"]}}class="low"{{??}}class="num"{{?}} >{{=it.dsr["service"]["shopComplain"]}}</span>%</li>',"</ol>",'<ol class="li li5">','<li class="title"> 行业 </li>','<li>{{=it.dsr["service"]["averageShip"]}} 天</li>','<li>{{=it.dsr["service"]["averageBack"]}} %</li>','<li>{{=it.dsr["service"]["averageComplain"]}} %</li>',"</ol>","</div>"].join("");t.ajax({url:"http://www.mogujie.com/trade/shopweb_index/asyShopHead",type:"get",dataType:"jsonp",jsonp:"callback",data:{shopId:t("#shopId").val()},success:function(i){var n="<div class='no-result'>加载中，请稍后...</div>";if(i.success){var a=i.data;a.dsrArr={desc:"描述相符",quality:"质量满意",price:"价格合理",service:"服务周到"},n=MoGu.ui.getTemplate(e,a)}t(".shop-header .shop-info").html(n)}}),t(".shop-header .user-info").addClass("hover")},a=function(){e.on("click",".J-shop-follow",function(){var e=t(this),n=0,a=t(".J-shop-follow"),s=t(this).data("shopid");e.hasClass("shop-followed")&&(n=1),t.ajax({url:"/x6/shop/"+s+"/collectShop",type:"post",dataType:"json",data:{isCollected:n}}).done(function(s){if(1001==s.status.code)if(0==n){if(a.addClass("shop-followed").text("已收藏"),e.data("pid")){var o=e.data("pid");t(".shop-name .mogutalk_widget_btn").data("bid").split("#")[0];t.ajax({url:i+"/index/getPromotion",data:{pid:o},type:"post",dataType:"json",success:function(e){if(1001===e.status.code){var i=['<div class="popBox" style="position: fixed; top: 50%;left: 50%;margin-left: -319px;margin-top: -191px;width: 638px;height: 382px;z-index: 111;background: #fff;">','<a href="javascript:;" class="btn_close" style="position: absolute;top: 0;right: 0;width: 50px;height: 50px;"></a>','<img src="http://s8.mogucdn.com/pic/141202/13t2zv_ieydmm3fgeywcmdfmqytambqmmyde_638x382.jpg" alt="" />','<a target="_blank" href="http://www.mogujie.com/trade/promotion/user/shopcoupon" class="btn_view" style="position: absolute;bottom: 75px;left: 152px;width: 335px;height: 65px;"></a>',"</div>"].join("");t("body").append(i),t(".popBox").on("click",".btn_close",function(){t(".popBox").remove()})}else t.alert(e.result.error)},error:function(){t.alert("领取失败，请稍后再试!")}})}}else a.removeClass("shop-followed").text("收藏");else if(1022==s.status.code){MOGU.user_handsome_login_init();var r={callback:function(){e.trigger("click")}};MOGU.user_handsome_login(!1,r)}else alert(s.status.msg)})}).off("mouseover mouseleave").on({mouseover:function(){n()},mouseleave:function(){t(".shop-header .user-info").removeClass("hover")}},".J-show-shop-score").on("click",".J_coupon_apply",function(){var e=t(this);t.ajax({url:i+"/index/getPromotion",type:"post",dataType:"json",data:{pid:t(this).attr("data-id")}}).done(function(i){if(1001==i.status.code)t.alert("领取成功");else if(1022==i.status.code){MOGU.user_handsome_login_init();var n={callback:function(){e.trigger("click")}};MOGU.user_handsome_login(!1,n)}else t.alert(i.result.error)})}).on("mouseenter mouseleave",".J_QrcodeSlide",function(e){var n=t(".J_QrcodeSlideContainer"),a=t(".J_QrcodeContainer");if(e=e||window.event,"mouseleave"===e.type)return void a.hide();if(a.show(),!(n.html().toLowerCase().indexOf("<div")>-1)){if(!i||""==i)return void a.hide();var s=t("#shopbaseurl").val();/\.com$/.test(s)&&(s+="/");var o=t("#shoplogo"),r=o.val(),l=/^http:/.test(r);l||(r="http://s7.mogucdn.com"+r),o.length>0&&/(gif|jpeg|jpg|png)$/i.test(o.val())&&a.find(".qrcode-icon").css("background-image","url("+r+")"),n.qrcode({render:"div",text:s,size:120,ecLevel:"M"})}}).on("click",".J_QrcodeSlide",function(){var e=t(".J_QrcodeSlideContainer"),i=t(".J_QrcodeContainer");e.html().indexOf("<div")>-1&&i.toggle()}).on("click","#J_SearchInShop",function(){var e=t(this).data("baseurl"),i=t.trim(t("#J_SearchKey").val());if(""!=i){t("#J_SearchInShopForm").remove();var n=t("<form>");n.attr({id:"J_SearchInShopForm",target:"_blank",action:e+"/search/index/",method:"GET"}).html('<input type="hidden" name="q" class="search-key" value="'+i+'" />'),t("body").append(n),n[0].submit()}}),t(".J_QrcodeSlide").trigger("mouseover"),setTimeout(function(){t(".J_QrcodeSlide").trigger("mouseleave")},3e3)};return{init:a}}(),n.domRender=function(){var e=function(){if(t(".J_msg").length>0&&t(".J_msg").attr("data-bid",t("#shopid").val()),t(".back2top_wrap").find(".go_top").length>0){var e=['<div class="ext_module qrcode J_QrcodeSlide" href="javascript:;">','<div class="qrcode-container J_QrcodeContainer"><div class="qrcode-node J_QrcodeSlideContainer"><b class="qrcode-icon"></b></div><span class="tip">扫描进入手机店铺</span></div></div>'].join("");t(".back2top_wrap").find(".go_top").before(e),t(".J_QrcodeSlide").show()}};return{init:e}}(),t(function(){n.domRender.init(),n.domEvent.init()})}(jQuery)},function(t,e){"use strict";!function(t){function e(t){var e=null;t.on("mouseenter",".topNav .all",function(){t.find(".slideer").fadeIn(100)}).on("mouseleave",".topNav li.all",function(i){clearTimeout(e),e=setTimeout(function(){t.find(".slideer").hide()},100)}),t.on("mouseenter",".category_list",function(){clearTimeout(e),t.find(".slideer").show()}).on("mouseleave",".category_list",function(i){clearTimeout(e),e=setTimeout(function(){t.find(".slideer").hide()},100)})}e($(".mod_topNav"))}(window)},function(t,e,i){var n,a=i(7),s=i(9),o=i(10),r=i(11),l=i(12),d=(i(13),i(14)),c=i(16),u=i(19),p=i(20);n=function(){var t="production"==MOGUPROFILE.appEnv?"http://www.mogujie.com":"",e=$("#J_GoodsInfo"),i=$("#J_SmallImgs"),n=$("#J_BigImg"),f=$("#J_GoodsSku"),m=f.find(".J_GoodsStock"),h=$("#J_GoodsNum"),g={callbacks:{renderBefore:function(){},renderAfter:function(){_.swicthFavorable(),_.switchFreeMail(),_.getPromotion()}}},v={sku:window.detailInfo||{},filter:{}},_={init:function(){d.init(g),"rush"==window.detailInfo.detailType?u.init():c.init(),o.setData(v.sku),this.sku(),this.smallImgs(),this.bindEvent()},bindEvent:function(){this.cpclog(),this.rushBuy(),this.buyNow(),this.buyCart(),this.switchImg(),this.skuPannel(),this.updateSku(),this.chooseSku(),this.stockTip(),this.switchFav(),this.switchShare(),this.dotlog(),this.changeSkuForDapei(),this.changeSku(),r.init(h,$("body")),detailInfo.isMoguer&&this.moguerPanel(),$("#J_CountDown").length>0&&l.init($("#J_CountDown"),p.countDown)},sku:function(){var t=o.getSkuItems();if("undefined"!=typeof t&&t){var e=t.style,i=o.getStyleLen(),n=t.size,a=o.getSizeLen(),s=[],r=[];if(e&&i>0){for(var l in e){var d=[];d=e[l].img&&""!=e[l].img?{className:"img",id:l,title:e[l].style,bigImg:e[l].img,img:e[l].img+"_100x100.jpg"}:{className:"",id:l,title:e[l].style,bigImg:"",img:""},e[l].disable?d.className=d.className+" disable":1==i&&(d.className=d.className+" c",v.filter.styleId=l),s.push(MoGu.ui.getTemplate(p.sku,d))}f.find(".style").show().find(".J_StyleList").html(s.join(""))}else f.find(".style").hide();if(n&&a>0){for(var l in n){var d={className:"",id:l,title:n[l].size,bigImg:"",img:""};n[l].disable?d.className=d.className+" disable":1==a&&(d.className=d.className+" c",v.filter.sizeId=l),r.push(MoGu.ui.getTemplate(p.sku,d))}f.find(".size").show().find(".J_SizeList").html(r.join(""))}else f.find(".size").hide();v.skuItems=t,this.fresh()}},fresh:function(){if("undefined"!=typeof v.skuItems&&v.skuItems){var t=o.getSkuItem(v.filter,v.skuItems);t&&(this.price(t),this.stock(t.stock),this.list(t),v.choose=t)}},stock:function(t){m.html(t?MoGu.ui.getTemplate(p.stock,{stock:t}):""),h.attr("data-stock",t)},list:function(t){var e=t.stocks,i=0;if(e){for(var n in e){i+=e[n];var a=f.find('li[data-id="'+n+'"]');0===e[n]?a.addClass("disable"):a.removeClass("disable")}t.stock||this.stock(i)}else if(v.skuItems){if(v.skuItems.size)for(var s in v.skuItems.size){var o=v.skuItems.size[s];if(o)if(o.stocks)for(var n in o.stocks)i+=o.stocks[n]||0;else o.stock&&(i+=o.stock||0)}if(0==i&&v.skuItems.style)for(var r in v.skuItems.style){var l=v.skuItems.style[r];if(l)if(l.stocks)for(var n in l.stocks)i+=l.stocks[n]||0;else l.stock&&(i+=l.stock||0)}!t.stock&&i>0&&this.stock(i)}},price:function(t){"undefined"!=typeof t&&t&&("number"==typeof t.price?$("#J_OriginPrice").text("¥"+(t.price/100).toFixed(2)):v.sku.main&&v.sku.main.originPrice&&$("#J_OriginPrice").text(v.sku.main.originPrice),"number"==typeof t.nowprice?$("#J_NowPrice").text("¥"+(t.nowprice/100).toFixed(2)):v.sku.main&&v.sku.main.nowPrice&&$("#J_NowPrice").text(v.sku.main.nowPrice))},bigImg:function(t){t&&""!=t&&(n[0].src=t)},smallImgs:function(){if("undefined"!=typeof v.skuItems&&v.skuItems){var t=v.skuItems.style,e=(v.sku.main||{}).topImages||[],n=[];if(t){if(e)for(var a=0,s=e.length;s>a;a++)n.push('<li><img src="'+e[a]+'_100x100.jpg"><i></i></li>');return n.length<=1?void i.hide():void i.find("ul").html(n.join(""))}}},changeSkuForDapei:function(){$("body").on("dapeiSkuSelect",function(t,e){$(".dapei-container")&&$(".dapei-container .dapei-item").each(function(t,i){$(i).find('.dapei-body-items-item[data-index="true"] .dapei-sku-body').trigger("changeSku",[e])})})},changeSku:function(){f.on("changeSku",function(t,e){var i=f.find('.J_SizeList li[data-id="'+e.sizeId+'"]').removeClass("c");$("body").trigger("updateSku",[i]);var n=f.find('.J_StyleList li[data-id="'+e.styleId+'"]').removeClass("c");$("body").trigger("updateSku",[n])})},moguerPanel:function(){var t=window.detailInfo||{},e=t.itemId;e&&$.ajax({url:"/pc_detail/detail_admin/"+e,dataType:"html"}).done(function(t){$(".mod_topNav").after(t)})},dotlog:function(){if(window.detailInfo){var t=$("#shopid").val(),e=MGTOOL.getQueryString("cparam"),i=window.detailInfo.itemId,n=MOGUPROFILE&&MOGUPROFILE.logString;$.ajax({url:"/trade/item_detail/dotlog",type:"POST",dataType:"json",data:{itemId:i,shopId:t,cparam:e,logString:n}}).done(function(t){})}},cpclog:function(){var t=MGTOOL.getQueryString("cparam");if(""!=t){var e={cparam:t,clickUserId:detailInfo.loginUserId||"",timestamp:+new Date,tradeItemId:window.detailInfo.itemId||"",uuid:MGTOOL.getCookie("__mgjuuid")||"",refUrl:window.sessionStorage.getItem("reffer")||document.referrer,platform:1,web:0},i="http://log.juangua.com/unionlog.php?cpcparam="+encodeURIComponent(JSON.stringify(e));$("body").append("<img style='display:none' src='"+i+"'/>")}},switchImg:function(){i.on("mouseenter","li",function(){var t=$(this).find("img").eq(0).attr("src");$(this).addClass("c").siblings().removeClass("c"),n[0].src=t.replace("_100x100.jpg","_468x468.jpg")}),i.find("li").length>5?(s.init(i,{width:350,height:59}),i.find("ul").addClass("carousel"),i.find(".right-btn").show()):i.find("ul").css("text-align","center")},chooseSku:function(){f.on("click","ol li:not(.disable)",function(){$("body").trigger("updateSku",[$(this)]),$("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),y.isBuy()&&f.find(".J_PannelOK").css("display","inline-block").prev().hide(),$("body").trigger("dapeiSkuSelect",[v.filter])})},updateSku:function(){var t=this;$("body").on("updateSku",function(e,i){var a=i.closest("ol");if(i.hasClass("c")){if(a.hasClass("J_StyleList")){if(1===o.getStyleLen())return;if(i.removeClass("c"),delete v.filter.styleId,t.sku(),o.getSizeLen()>0&&v.filter.sizeId){var s=$('.J_SizeList li[data-id="'+v.filter.sizeId+'"]').removeClass("c");$("body").trigger("updateSku",[s])}t.bigImg(n.data("main"))}if(a.hasClass("J_SizeList")){if(1===o.getSizeLen())return;if(i.removeClass("c"),delete v.filter.sizeId,t.sku(),o.getStyleLen()>0&&v.filter.styleId){var r=$('.J_StyleList li[data-id="'+v.filter.styleId+'"]').removeClass("c");$("body").trigger("updateSku",[r])}}}else i.addClass("c").siblings().removeClass("c"),a.hasClass("J_StyleList")&&(v.filter.styleId=i.data("id"),v.filter.type="style",t.bigImg(i.data("src"))),a.hasClass("J_SizeList")&&(v.filter.sizeId=i.data("id"),v.filter.type="size"),t.fresh()})},stockTip:function(){$("body").on("stockTip",function(t,e,i,n){var a=n?n.siblings(".goods-stock-tip"):f.find(".J_GoodsStockTip");+e>+i?(a.show(),v.isStock=0):(a.hide(),v.isStock=1)})},limitState:function(){$("body").on("limitState",function(t,e,i,n){var a=f.find(".num-add");n&&""!=n&&(e>=Math.min(+n,i)?a.addClass("num-disable"):a.removeClass("num-disable"))})},rushBuy:function(){$("#J_ModuleRushBuy").on("click",'a[data-type="buynow"]',function(){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),v.isStock&&!$(this).hasClass("buy-disabled")){var e=y.getParams();if(detailInfo.isLogin)t(e);else{var i=$.extend(!0,{},{callback:function(){detailInfo.isLogin=!0,t(e)}});MOGU.user_handsome_login_init(),MOGU.user_handsome_login(!1,i)}return!1}});var t=function(t){var e=$("<form>"),i=['<input type="hidden" name="detailrefer" value="'+$("#J_DetailRefer").val()+'">','<input type="hidden" name="ptpData" value="'+t.ptpdata+'">','<input type="hidden" name="rushId" value="'+t.rushId+'">'];i.push('<input type="hidden" name="postdata" value="'+t.stockId+',1" />'),i.push('<input type="hidden" name="ptp" value='+t.ptp+">"),i.push('<input type="hidden" name="channel" value="channel_kuaiqiang">'),i.push('<input type="hidden" name="marketType" value="market_mogujie">'),i.push('<input type="hidden" name="activityId" value="'+MGTOOL.getQueryString("objectId")+'">'),i.push('<input type="hidden" name="activityType" value="1">'),i=i.join("");var n="http://buy.mogujie.com/buy";e.attr({action:n,method:"POST"}).html(i),$("body").append(e),e[0].submit()}},buyNow:function(){$("#J_BuyNow").on("click",function(){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),v.isStock){var e=y.getParams();return detailInfo.isLogin?t(e):(MOGU.user_handsome_login_init(),MOGU.user_handsome_login(!1,{callback:function(){detailInfo.isLogin=!0,t(e)}})),!1}});var t=function(t){try{window.logger&&logger.log("pc01022",{itemid:detailInfo.itemId,num:t.num,price:(v.choose.price/100).toFixed(2),disprice:(v.choose.nowprice/100).toFixed(2),style:v.choose.style||"",size:v.choose.size||""})}catch(e){}var i=$("<form>"),n=['<input type="hidden" name="postdata" value="'+t.stockId+","+t.num+'" />','<input type="hidden" name="detailrefer" value="'+$("#J_DetailRefer").val()+'">','<input type="hidden" name="marketType" value="market_mogujie">','<input type="hidden" name="ptp" value='+t.ptp+">"].join("");i.attr({action:"http://buy.mogujie.com/buy",method:"POST"}).html(n),$("body").append(i),i[0].submit()}},buyCart:function(){var t=this,e=0;$("#J_BuyCart").on("click",function(i){var n=$(i.srcElement||i.target);if(!(n.length>0&&"J_ModuleCartLuckyDrawTip"==n.attr("id"))){var s=$(this);if(!s.hasClass("buy-disable")){if(f.data("btn",$(this)),!y.isBuy())return void f.addClass("goods-pannel");if($("body").trigger("stockTip",[h.find(".num-input").val(),h.attr("data-stock")]),v.isStock){var o=y.getParams();if(o.detailrefer=$("#J_DetailRefer").val(),o.cdtype=MGTOOL.getQueryString("cdtype"),o.price=v.choose.nowprice,top.location!=self.location){var r=y.getBuyURL("WX_CART",o);return void window.open(r)}s.addClass("buy-disable"),clearTimeout(e),e=setTimeout(function(){s.removeClass("buy-disable")},1e3);var l=$(".detail-beauty").length>0?340:351,d=!!$.browser.msie&&"6.0"==$.browser.version;$("#J_AddCartBox .J_Close").trigger("click");var c={title:"添加购物车",lightBoxId:"J_AddCartBox",contentHtml:MoGu.ui.getTemplate(p.addcart,{src:y.getBuyURL("CART",o),farameHeight:l}),scroll:!1,resizeshow:d};t.flyToChart(i,function(){$(".u-flyer").hide();var t=new MGLightBox(c);t.init(),$("#J_AddCartBox").on("click",".J_Close",function(){t.close()}).find(".lb_bd").css({padding:0,background:"none"}).prev().remove();var e=$(".mgj_rightbar"),i=$(".mgj-my-cart",e);!d&&i.length>0&&!function(){var t=function(){$("#J_AddCartBox").css({left:e.offset().left-$("#J_AddCartBox").width()+1,top:60,position:"fixed"})};t(),$(window).off(".addcartbox").on("resize.addcartbox",function(){t()})}()});try{window.logger&&logger.log("pc01021",{itemid:detailInfo.itemId,num:o.num,price:(v.choose.price/100).toFixed(2),disprice:(v.choose.nowprice/100).toFixed(2),style:v.choose.style||"",size:v.choose.size||""})}catch(u){}detailInfo.redPacketsSwitch&&a.cartAfterForLuckyDraw()}}}}),window.__DetailBuyCartEnable=function(){clearTimeout(e),$("#J_BuyCart:visible").removeClass("buy-disable")}},flyToChart:function(t,e){var i=$(".mgj-my-cart").offset(),n=$("#J_BuyCart:visible"),a=$('<img class="u-flyer" style="display: block;width: 50px;height: 50px;border-radius: 50px;position: fixed;z-index: 9999;" src="http://s16.mogucdn.com/p1/150928/upload_ieywizlbgfrtqodfgmzdambqmeyde_60x60.png"/>');if(n.length<=0&&(n=$(".J_PannelOK:visible").eq(0)),!(n.length<=0)){var s=document.body.scrollLeft||document.documentElement.scrollLeft||window.pageXOffset||0,o=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,r=0,l=0;t.pageX&&t.pageY?(r=t.pageX,l=t.pageY-o-20):(r=n.offset().left-s+n.outerWidth()/2,l=n.offset().top-o+n.outerHeight()/2),a.fly({start:{left:r,top:l},end:{left:i.left-s,top:20+i.top-o,width:20,height:20},onEnd:function(){e()}})}},getPromotion:function(){var t=!1;$(".J_get_promotion").on("click",function(){var e=$(this);if(!t){t=!0;var i=e.attr("pid");$.ajax({url:"/getpro/"+i,dataType:"json"}).done(function(t){1001==t.status.code?(e.removeClass("not-get-btn"),e.off("click"),e.removeClass(".J_get_promotion"),e.text("已领取")):$.alert(t.result.error)}).fail(function(t){$.alert("系统繁忙")}).always(function(){t=!1})}})},skuPannel:function(){f.on("click",".J_PannelClose",function(){f.removeClass("goods-pannel")}).on("click",".J_PannelOK",function(t){var e=$.Event("click");e.pageX=t.pageX,e.pageY=t.pageY,f.removeClass("goods-pannel").data("btn").trigger(e)})},switchElem:function(t,e){var i=null;t.hover(function(){i&&clearTimeout(i),e.show()},function(){i=setTimeout(function(){e.hide()},100)})},switchFav:function(){var t=!1;e.on("click",".fav",function(){var e={},i=$(this);return detailInfo.isLogin?(e.twitterid=i.attr("tid"),e.tradeitemid=i.attr("tradeitemid"),e.content="",e.local=MOGUPROFILE.local,void(t||(t=!0,$.ajax({url:"/collect/favtwitter",type:"POST",dataType:"JSON",data:e}).done(function(t){var e=t.status.code;1001==e&&i.removeClass("fav").addClass("faved").find(".fav-num").text(t.result.data.cfav)}).fail(function(){$.alert("系统繁忙")}).always(function(){t=!1})))):(MOGU.user_handsome_login_init(),callback_option={callback:function(){detailInfo.isLogin=!0,i.trigger("click")}},void MOGU.user_handsome_login(!1,callback_option))}).on("click",".faved",function(){var e={},i=$(this);e.twitterid=i.attr("tid"),e.tradeitemid=i.attr("tradeitemid"),t||(t=!0,$.ajax({url:"/collect/delfav",type:"POST",dataType:"JSON",data:e}).done(function(t){var e=t.status.code;1001==e&&i.removeClass("faved").addClass("fav").find(".fav-num").text(t.result.data.cfav)}).fail(function(){$.alert("系统繁忙")}).always(function(){t=!1}))})},switchShare:function(){this.switchElem(e.find(".share"),e.find(".share-w"))},swicthFavorable:function(){var t=e.find(".favorable-list");t.length<=0||this.switchElem(e.find(".promotion-box"),t)},switchFreeMail:function(){var t=e.find(".freeMail-box"),i=e.find(".freeMail-detail");t&&i&&this.switchElem(t,i)},scrollLoad:function(){var t=window.detailInfo.rushId?"1":"0",e=window.detailInfo.rushId||window.detailInfo.itemId,i=$("#shopid").val(),n=[{name:"ModuleLook",url:"/trade/item_detail/hotlist?type=lookbox&shopId="+i+"&itemId="+e+"&itemType="+t+"&isNewDetail=1",callback:function(t){1001==t.status.code&&$("#J_ModuleLook").html(t.result||"")}}];Scroll.init(n)}},y={isBuy:function(){var t=o.getStyleLen(),e=o.getSizeLen();if(t>0&&e>0)return v.filter.styleId&&v.filter.sizeId?1:0;if(t>0&&0>=e)return v.filter.styleId?1:0;if(0>=t&&e>0)return v.filter.sizeId?1:0;if(0>=t&&0>=e){var i=window.detailInfo.attribute;return i&&1==i.length?(v.choose=i[0],1):0}},getParams:function(){var t={};t.stockId=v.choose.stockId,t.num=+h.find(".num-input").val(),t.traceid=$("#traceid").val()||"",t.cpcid=$("#cpcid").val()||"";var e={};return e[v.choose.stockId]=a.getQueryString("ptp"),t.ptp=JSON.stringify(e),t.ptpdata=a.getQueryString("ptp"),t.rushId=$("#J_RushId").val()||"",t},getBuyURL:function(e,i){var n=[t];switch(e){case"WX_CART":n.push("/add2cart2");break;case"CART":n=[],n.push("http://cart.mogujie.com/cart/addcart")}var a=i.detailrefer.split("&ptp")[0];return n.push("?stockId="+i.stockId+"&number="+i.num+"&traceid="+i.traceid+"&tradeItemId="+window.detailInfo.itemId+"&cpcid="+i.cpcid+"&ptp="+i.ptpdata+"&price="+i.price,"&cdtype="+i.cdtype,"&detailrefer="+a,"&marketType=market_mogujie","&iscosta=true"),n.join("")}};return window.__RefreshSKUForRush=function(t){v.sku.attribute=t||{},o.setData(v.sku),_.sku()},{init:function(){_.init()}}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,BASE=__webpack_require__(8);__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.__CUtil=window.__CUtil||{_getPageType:function(){return this.__pagetype||(this.__pagetype=$("#J_PageType").val()),this.__pagetype},getQueryString:function(t,e){e=e||location.href,e=e.split("#")[0];var i=new RegExp("(^|\\?|&)"+t+"=([^&]*)(\\s|&|$)","i");return i.test(e)?RegExp.$2.replace(/\+/g," "):""},getFormatDate:function(t,e){var i=function(t){return t+="",t.replace(/^(\d)$/,"0$1")},n={yyyy:t.getFullYear(),yy:t.getFullYear().toString().substring(2),M:t.getMonth()+1,MM:i(t.getMonth()+1),d:t.getDate(),dd:i(t.getDate()),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};return e||(e="yyyy-MM-dd hh:mm:ss"),e.replace(/([a-z])(\1)*/gi,function(t){return n[t]})},getIsNone:function(){return 1==this.getQueryString("__none")},getIsDebug:function(){return 1==this.getQueryString("__debug")},getIsScreen:function(){return 1==this.getQueryString("__screen")},getIsWebDemo:function(){return/webdemo\.com/.test(location.host)},getPageTypeIsItem:function(){return"item"==this._getPageType()},getPageTypeIsRush:function(){return"rush"==this._getPageType()},getPageTypeIsSeckill:function(){return"seckill"==this._getPageType()},getShopId:function(){return this.__shopId||(this.__shopId=this.getQueryString("__shopId"),this.__shopId=this.__shopId||$("#J_ShopId").val()),this.__shopId},getItemId:function(){return this.__itemId||(this.__itemId=this.getQueryString("__itemId"),this.__itemId=this.__itemId||$("#J_ItemId").val()),this.__itemId},getSellerId:function(){return this.__sellerId||(this.__sellerId=this.getQueryString("__sellerId"),this.__sellerId=this.__sellerId||$("#J_SellerId").val()),this.__sellerId},getRushId:function(){return this.__rushid||(this.__rushid=this.getQueryString("__rushid"),this.__rushid=this.__rushid||$("#J_RushId").val()),this.__rushid},getSeckillId:function(){return this.__seckillid||(this.__seckillid=this.getQueryString("__seckillid"),this.__seckillid=this.__seckillid||$("#J_SeckillId").val()),this.__seckillid},getRushData:function getRushData(){if(!this.__rushData){var rushData=$.trim($("#J_RushData").val());this.__rushData=eval("("+decodeURIComponent(rushData)+")")}return this.__rushData},getPreSaleRulesData:function getPreSaleRulesData(){if(!this.__preSaleRulesData){var preSaleRulesData=$.trim($("#J_PreSaleRulesData").val());this.__preSaleRulesData=preSaleRulesData?eval("("+preSaleRulesData+")"):{}}return this.__preSaleRulesData},getIsShowCartLuckyDrawTips:function(){return!0},getCartLuckyDrawData:function(){return this.__cartLuckyDrawData||(this.__cartLuckyDrawData=$("#J_CartLuckyDrawData").data()||{}),this.__cartLuckyDrawData},getUserId:function(){return detailInfo.loginUserId||""},getLoginResult:function(){return detailInfo.isLogin},isLogin:function(t){if(!detailInfo.isLogin){var e=$.extend(!0,{},{callback:function(){detailInfo.isLogin=!0}},t||{});return MOGU.user_handsome_login_init(),MOGU.user_handsome_login(!1,e),!1}return!0},goToTabPosition:function(t){0!=t.length&&$("html, body").scrollTop(function(){return t.offset().top-59})},cartAfterForLuckyDraw:function(){$("#J_BuyCart:visible").trigger("cartluckydraw")},formatTimeStamp:function(t,e){var i=new Date(1e3*parseInt(t));return this.formatDate(i,e)},formatDate:function(t,e){var i=function(t){return t+="",t.replace(/^(\d)$/,"0$1")},n={yyyy:t.getFullYear(),yy:t.getFullYear().toString().substring(2),M:t.getMonth()+1,MM:i(t.getMonth()+1),d:t.getDate(),dd:i(t.getDate()),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};return e||(e="yyyy-MM-dd hh:mm:ss"),e.replace(/([a-z])(\1)*/gi,function(t){return n[t]})},getImgThumbnailUrl:function(t,e,i){return BASE.getImgThumbnailUrl(t,e,i)},getImgSize:function(t,e){return BASE.getImgSize(t,e)}},window.__CUtil}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,i){var n,a;n=[],a=function(){return{isMatchMlsCdn:function(t){var e=/\/([a-zA-Z0-9]{28})_/,i=/^http\:\/\/i\.meilishuo\.net\//;return!(!e.test(t)&&!i.test(t))},getImgOriginalURL:function(t){var e=/\.png|\.jpg|\.gif|\.jpeg|\.webp/gi;return e.test(t)?(t=(t||"").split(e),t.slice(0,1).join("")+".jpg"):t},getImgThumbnailUrl:function(t,e,i){return this.isMatchMlsCdn(t)?t:(t=this.getImgOriginalURL(t),e&&i?[t,"_",e,"x",i,".jpg"].join(""):t)},getImgSize:function(t,e){if(!t)return{width:0,height:0,hwPercent:0};t=this.getImgOriginalURL(t);var i=t.match(/\d+/g),n=i.length,a=0,s=0;this.isMatchMlsCdn(t)?(a=Number(i[n-2]),s=Number(i[n-3])):(a=Number(i[n-1]),s=Number(i[n-2]));var o=a/s*100;return e&&(s=s>e?e:s,o*=s/e),{width:s,height:a,hwPercent:o}}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n;n=function(){var t={init:function(t,e){var i={},e=$.extend(i,e),n=t.find("ul"),a=n.find("li").eq(0),s=n.find("li").length,o=parseInt(a.css("margin-right")),r=(a.width()+o)*s,l=0,d=!1;t.find(".list").width(e.width).height(e.height).end().on("click",".right-btn",function(){
var t=$(this);-l>=r-e.width||d||(l-=e.width,n.animate({left:l},"slow","swing",function(){-l>=r-e.width?t.hide().prev().show():t.prev().show(),d=!1}),d=!0)}).on("click",".left-btn",function(){var t=$(this);0>=-l||d||(l+=e.width,n.animate({left:l},"slow","swing",function(){0>=-l?t.hide().next().show():t.next().show(),d=!1}),d=!0)}),n.addClass("carousel"),t.find(".right-btn").show()}};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t={},e={},i=function(){if("undefined"!=typeof e&&e){for(var i=e.attribute||[],n=[],s=[],o=[],r=[],l=0,d=i.length-1;d>=0;d--)i[d].styleId&&(n.push(i[d].styleId),s.push(i[d].style)),i[d].sizeId&&(o.push(i[d].sizeId),r.push(i[d].size)),l+=i[d].stock||0;return n=a(n),o=a(o),t.styleLen=n.length,t.sizeLen=o.length,t.totalStock=l,{styleIds:n,sizeIds:o}}},n=function(t){return"undefined"!=typeof t&&t&&t.attribute&&!(t.attribute.length<=0)},a=function(t){t=t.slice().sort(function(t,e){return t>e?1:-1});for(var e,i,n=0,a=t.length;a>n;n++){for(e=n,i=t[n];a>e+1&&t[e+1]===i;)e++;e-n&&(e-=n,t.splice(n+1,e),a-=e)}return t},s={setData:function(t){n(t)&&(e=t)},getSkuItems:function(){var t=i();if("undefined"!=typeof t&&t){var n=e.attribute||[],a=t.styleIds,s=t.sizeIds,o=a.length,r=s.length,l={style:{},size:{}};if(o>0)if(r>0)for(var d=0,c=o;c>d;d++){l.style[a[d]]={},l.style[a[d]].stockId={},l.style[a[d]].stocks={},l.style[a[d]].sizeVals={},l.style[a[d]].nowprice={},l.style[a[d]].price={};for(var u=0,p=d*r,f=(d+1)*r;f>p;p++)l.style[a[d]].stockId[n[p].sizeId]=n[p].stockId,l.style[a[d]].stocks[n[p].sizeId]=n[p].stock,l.style[a[d]].sizeVals[n[p].sizeId]=n[p].size,l.style[a[d]].nowprice[n[p].sizeId]=n[p].nowprice,l.style[a[d]].price[n[p].sizeId]=n[p].price,l.style[a[d]].img=n[p].img,l.style[a[d]].style=n[p].style,0===n[p].stock&&++u;u==r&&(l.style[a[d]].disable=!0)}else for(var d=0,c=o;c>d;d++)l.style[a[d]]={},l.style[a[d]].stockId=n[d].stockId,l.style[a[d]].stock=n[d].stock,l.style[a[d]].img=n[d].img,l.style[a[d]].style=n[d].style,l.style[a[d]].nowprice=n[d].nowprice,l.style[a[d]].price=n[d].price,0===n[d].stock&&(l.style[a[d]].disable=!0);if(r>0)if(o>0)for(var d=0,c=r;c>d;d++){l.size[s[d]]={},l.size[s[d]].stockId={},l.size[s[d]].stocks={},l.size[s[d]].styleVals={},l.size[s[d]].nowprice={},l.size[s[d]].price={};for(var u=0,p=0,f=o;f>p;p++){var m=p*r+d;l.size[s[d]].stockId[n[m].styleId]=n[m].stockId,l.size[s[d]].stocks[n[m].styleId]=n[m].stock,l.size[s[d]].styleVals[n[m].styleId]=n[m].style,l.size[s[d]].nowprice[n[m].styleId]=n[m].nowprice,l.size[s[d]].price[n[m].styleId]=n[m].price,l.size[s[d]].size=n[m].size,0===n[m].stock&&++u}u==o&&(l.size[s[d]].disable=!0)}else for(var d=0,c=r;c>d;d++)l.size[s[d]]={},l.size[s[d]].stockId=n[d].stockId,l.size[s[d]].stock=n[d].stock,l.size[s[d]].size=n[d].size,l.size[s[d]].nowprice=n[d].nowprice,l.size[s[d]].price=n[d].price,0===n[d].stock&&(l.size[s[d]].disable=!0);return l}},getStyleLen:function(){return t.styleLen?t.styleLen:0},getSizeLen:function(){return t.sizeLen?t.sizeLen:0},getSkuItem:function(t,e){if(t||e){var i={};return t.styleId&&t.sizeId?i="style"==t.type?{price:e.style[t.styleId].price[t.sizeId],nowprice:e.style[t.styleId].nowprice[t.sizeId],style:e.style[t.styleId].style,img:e.style[t.styleId].img,stock:e.style[t.styleId].stocks[t.sizeId],stocks:e.style[t.styleId].stocks,size:e.style[t.styleId].sizeVals[t.sizeId],stockId:e.style[t.styleId].stockId[t.sizeId]}:{price:e.size[t.sizeId].price[t.styleId],nowprice:e.size[t.sizeId].nowprice[t.styleId],size:e.size[t.sizeId].size,stock:e.size[t.sizeId].stocks[t.styleId],stocks:e.size[t.sizeId].stocks,style:e.size[t.sizeId].styleVals[t.styleId],stockId:e.size[t.sizeId].stockId[t.styleId]}:t.styleId?i=e.style[t.styleId]:t.sizeId&&(i=e.size[t.sizeId]),i||{}}}};return s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t={init:function(t,e){var i=t.find(".num-input"),n=t.find(".num-add"),a=t.find(".num-reduce"),s=+i.val()||1,o=i.attr("data-limitnum"),r=function(){var e=+t.attr("data-stock");1>=s&&a.addClass("num-disable"),s>=e&&n.addClass("num-disable")},l=function(){n.on("click",function(){if(!$(this).hasClass("num-disable")){var n=+t.attr("data-stock");s=+i.val(),/^\d+$/.test(s)&&(++s,s>1&&a.removeClass("num-disable"),i.val(s),e.trigger("stockTip",[s,n,t]),o&&$("body").trigger("limitState",[s,n,o]))}}),a.on("click",function(){if(!$(this).hasClass("num-disable")){var n=+t.attr("data-stock");s=+i.val(),/^\d+$/.test(s)&&!a.hasClass("num-disable")&&(i.val(--s),1>=s&&a.addClass("num-disable"),e.trigger("stockTip",[s,n,t]),o&&$("body").trigger("limitState",[s,n,o]))}}),i.on("change",function(){var n=+t.attr("data-stock");return s=+i.val(),/^\d+$/.test(s)&&0!==s&&""!==s?(s>1&&a.removeClass("num-disable"),1>=s&&a.addClass("num-disable"),i.val(s),void e.trigger("stockTip",[s,n,t])):(i.val(1),void e.trigger("stockTip",[1,n,t]))})},d=function(){r(),l()};d()}};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){var t=function(t){var e=3600,i=60,n=1,a=parseInt(t/86400),s=parseInt(t/e)-24*a,o=parseInt(t/i)-60*parseInt(t/e),r=parseInt(t/n)-60*parseInt(t/i);return{day:a,hour:s,min:o,sec:r}},e=function n(e,i,a){if(!(0>=a)){a--;var s=t(a),o=MoGu.ui.getTemplate(i,s);e.html(o),setTimeout(function(){n(e,i,a)},1e3)}},i={init:function(t,i){if(!(t.length<=0)){var n=t.attr("cut-time");e(t,i,n)}}};return i}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){!function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+a)},a);return t=n+a,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),$.fly=function(t,e){var i={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:$.noop},n=this,a=$(t);n.init=function(t){this.setOptions(t),!!this.settings.autoPlay&&this.play()},n.setOptions=function(t){this.settings=$.extend(!0,{},i,t);var e=this.settings,n=e.start,s=e.end;a.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=s.width&&null!=s.height&&$.extend(!0,n,{width:a.width(),height:a.height()});var o=Math.min(n.top,s.top)-Math.abs(n.left-s.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(n.top,s.top)));var r=Math.sqrt(Math.pow(n.top-s.top,2)+Math.pow(n.left-s.left,2)),l=Math.ceil(Math.min(Math.max(Math.log(r)/.05-75,30),100)/e.speed),d=n.top==o?0:-Math.sqrt((s.top-o)/(n.top-o)),c=(d*n.left-s.left)/(d-1),u=s.left==c?0:(s.top-o)/Math.pow(s.left-c,2);$.extend(!0,e,{count:-1,steps:l,vertex_left:c,vertex_top:o,curvature:u})},n.play=function(){this.move()},n.move=function(){var t=this.settings,e=t.start,i=t.count,n=t.steps,s=t.end,o=e.left+(s.left-e.left)*i/n,r=0==t.curvature?e.top+(s.top-e.top)*i/n:t.curvature*Math.pow(o-t.vertex_left,2)+t.vertex_top;if(null!=s.width&&null!=s.height){var l=n/2,d=s.width-(s.width-e.width)*Math.cos(l>i?0:(i-l)/(n-l)*Math.PI/2),c=s.height-(s.height-e.height)*Math.cos(l>i?0:(i-l)/(n-l)*Math.PI/2);a.css({width:d+"px",height:c+"px","font-size":Math.min(d,c)+"px"})}a.css({left:o+"px",top:r+"px"}),t.count++;var u=window.requestAnimationFrame($.proxy(this.move,this));i==n&&(window.cancelAnimationFrame(u),t.onEnd.apply(this))},n.destroy=function(){a.remove()},n.init(e)},$.fn.fly=function(t){return this.each(function(){void 0==$(this).data("fly")&&$(this).data("fly",new $.fly(this,t))})}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,a,s=i(7),o=i(15);n=[],a=function(){var t={$container:null,_defaults:{callbacks:{renderBefore:function(){},renderAfter:function(){}}},settings:null,itemId:null,shopId:null,moduleData:null,_getAjaxParam:function(){return{url:"http://www.mogujie.com/trade/promotion/user/getcoupon/proInfo?shopId="+this.shopId,type:"get",dataType:"jsonp",jsonp:"callback",data:{_ajax:1}}},_initElem:function(){this.$container=$("#J_ModulePromotions")},_initData:function(){var t=this;this._triggerCallBack("renderBefore",null),this.itemId=s.getItemId(),this.shopId=s.getShopId();var e=$.extend(!0,{},this._getAjaxParam(),{});$.ajax(e).done(function(e){if(1001!=e.status.code)return void console.log("优惠券接口数据获取失败："+(e.result||e.status.msg));var i=!!e.result.proList&&e.result.proList.length>0,n=!!e.result.freeMail&&e.result.freeMail.length>0;(i||n)&&(t.moduleData=e.result,t._render(),t._events())}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),this._triggerCallBack("renderAfter",null)},_events:function(){},_triggerCallBack:function(t,e){var i=this;if(i.settings&&i.settings.callbacks){var n=i.settings.callbacks[t];"function"==typeof n&&n&&n.call(i,e)}},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<dl class="clearfix promotions-box">\n  <dt>店铺优惠：</dt>\n  <dd class="clearfix">\n    {{?false}}\n    <!-- 目前模块的划分是从这里开始的，后续会把这块改造，放在最外面 -->\n    {{?}}\n    <div class="module-promotions clearfix">\n        <!-- 店铺优惠列表 -->\n        {{var __proList = it.proList;}}\n        {{?__proList && __proList.length > 0}}\n          <div class="promotion-box">\n              <span class="info shopPromotion-info">{{=__proList[0].desc}}</span>\n              <span class="more"></span>\n              <div class="favorable-list">\n                  <ul>\n                    {{~__proList: proItem}}\n                      <div class="favorable-item fl">\n                          <span class="dot fl">▪</span>\n                          <span class="fl">{{=proItem.desc}}</span>\n                          {{?proItem.canGet == 2}}\n                            <span class="fr get-btn not-get-btn J_get_promotion" pid="{{=proItem.proId}}">领取</span>                                        \n                          {{??proItem.canGet == 3}}\n                            <span class="fr get-btn">已领取</span>                                        \n                          {{?}}\n                      </div>\n                    {{~}}\n                  </ul>\n                  <b></b>\n              </div>\n          </div>\n        {{?}}\n        \n        <!-- 满包邮 -->\n        {{var __freeMail = it.freeMail;}}\n        {{?__freeMail && __freeMail.length > 0}}\n          {{~__freeMail: freeMailItem :freeMailIndex}}\n            <!-- 满包邮数据，只读取第一项数据 -->\n            {{?freeMailIndex == 0}}\n              <div class="freeMail-box">\n                  <span class="info freeMail-info">{{=freeMailItem.title}}</span>\n                  <span class="more"></span>\n                  <div class="freeMail-detail fl">\n                      <span class="fl freeMail-title">▪ 包邮说明</span>\n                      {{?freeMailItem.desc}}\n                        <span class="fl freeMail-desc">不包括 {{=freeMailItem.desc.join(\'/\')}} 地区</span>\n                      {{??}}\n                        <span class="fl freeMail-desc">全国包邮</span>\n                      {{?}}\n                      <span class="fl freeMail-title">▪ 活动时间</span>                                        \n                      <span class="fl time">{{=__CUtil.formatTimeStamp(freeMailItem.startTime, \'yyyy.MM.dd\')}} ~ {{=__CUtil.formatTimeStamp(freeMailItem.endTime, \'yyyy.MM.dd\')}}</span>\n                      <b></b>\n                  </div>\n              </div>\n            {{?}}\n          {{~}}\n        {{?}}\n    </div>\n  </dd>\n</dl>\n'},function(t,e,i){var n,a,s=i(17),o=i(7),r=i(18);n=[],a=function(){var t={$container:null,itemId:null,moduleData:null,_getAjaxParam:function(){return{url:"http://mce.mogujie.com/jsonp/get/2",type:"get",dataType:"jsonp",data:{iidE:this.itemId,pid:5124,plat:"pc",limit:3}}},_initElem:function(){this.$container=$("#J_ModuleLook")},_initData:function(){var t=this;this.itemId=o.getItemId();var e=$.extend(!0,{},this._getAjaxParam(),{});$.ajax(e).done(function(e){if(e){if(!e.success)return void console.log("热卖推荐接口数据获取失败："+e.message);t.moduleData=e.data,t._render(),t._events();var i=e.data.list||[];s.recommender(i)}}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t)},_events:function(){},init:function(){this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n=[],a=function(){return{recommender:function(t){try{var e=function(){var e=[],i=[],n=[];return t&&t.length?(t.forEach(function(t,a){e.push(t.acm||""),i.push(t.item_id||""),n.push(a)}),void logger.log("70500",{acms:e,iids:i,indexs:n})):{v:void 0}}();if("object"===("undefined"==typeof e?"undefined":s(e)))return e.v}catch(i){window.console&&console.log("商品推荐数据曝光打点：",i)}}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 热卖推荐 -->\n{{?it.list && it.list.length > 0}}\n<p class="title"><s></s><span>热卖推荐</span></p>\n<div class="list">\n    <div class="box">\n      <ul>\n        {{~it.list:item:index}}\n        <li>\n          <a href="{{=item.item_url}}" target="_blank">\n            <img src="{{=item.image}}_220x330.jpg" width="120">\n          </a>\n          <span>￥{{=item.discountPrice}}</span>\n        </li>\n        {{~}}\n      </ul>\n    </div>\n</div>\n{{?}}'},function(t,e,i){var n,a,s=(i(17),i(7));n=[],a=function(){var t={$container:null,itemId:null,shopId:null,moduleData:null,_getAjaxParam:function(){return{url:"http://shop.mogujie.com/trade/item_detail/hotlist",type:"get",dataType:"jsonp",data:{type:"lookbox",shopId:this.shopId,itemId:this.itemId,itemType:"1",isNewDetail:"1",limit:3}}},_initElem:function(){this.$container=$("#J_ModuleLook")},_initData:function(){var t=this;this.itemId=s.getRushId(),this.shopId=s.getShopId();var e=$.extend(!0,{},this._getAjaxParam(),{});$.ajax(e).done(function(e){if(e){if(1001==!e.status.code)return void console.log("快抢推荐接口数据获取失败："+e.status.msg);t.moduleData=e.result,t._render(),t._events()}}).fail(function(){})},_render:function(){this.$container.html(this.moduleData)},_events:function(){},init:function(){this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n;n=function(){var t={sku:['{{ if(it.img && it.img != ""){ }}','<li class="{{=it.className}}" data-id="{{=it.id}}" data-src="{{=it.bigImg}}" title="{{=it.title}}"><img src="{{=it.img}}"><b></b></li>',"{{ }else{ }}",'<li class="{{=it.className}}" data-id="{{=it.id}}" title="{{=it.title}}">{{=it.title}}</li>',"{{ } }}"].join(""),stock:"库存{{=it.stock}}件",addcart:["<div class='content'>","<div class='head clearfix'>","<a href='javascript:;' class='J_Close close-btn'>关闭</a>","<span class='arrow_right'></span>","</div>","<div class='body'>",'<iframe src=\'{{=it.src}}\' width="500" height="{{=it.farameHeight}}" scrolling="no" frameborder="0">',"</div>","</div>"].join(""),countDown:['<span class="d">{{=it.day}}</span>天','<span class="h">{{=it.hour}}</span>小时','<span class="m">{{=it.min}}</span>分','<span class="s">{{=it.sec}}</span>秒'].join("")};return t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,a,s=i(7),o=i(22),r=i(23),l=i(24),d=i(25),c=i(26),u=i(29),p=i(31),f=i(34),m=i(36),h=i(38),g=i(39),v=i(43),_=i(45),y=i(47);n=[],a=function(){if(!s.getIsNone()){var t={events:{loading:function(t){},loaded:function(t){m.addPositonDataForRecommend()}}},e={events:{loading:function(t){},loaded:function(e){m.init(e.moduleData),f.init(t)}}},i={events:{switchBefore:function(e){if(!e.isActived)switch(e.curPanel){case"graphic":break;case"rates":break;case"recommend":f.init(t),$(window).scrollTop(function(){return $(window).scrollTop()-1})}},switchAfter:function(t){}}},n={_initCommon:function(){o.test(),r.init()},_initModule:function(){g.init(),v.init(),y.init(),_.init(),d.init(),h.init(),c.init(),u.init(e),p.init(),l.init(i)},init:function(){this._initCommon(),this._initModule()}};return n}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(7);n=[],a=function(){var t={test:function(){s.getIsScreen()&&$("body").off(".screen").on("click.screen",function(){return $(this).toggleClass("media_screen_1200 media_screen_960"),!1})}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a;n=[],a=function(){return window.__CFixed=window.__CFixed||{$win:null,tabpanelSelector:"#J_ModuleTabpanel",shopSelector:"#J_ModuleShop",cartSelector:"#J_ModuleCart",extranavSelector:"#J_ModuleExtranav",__target:null,__preIsFixed:!1,init:function(){var t=this;t.$win=$(window),t.$win.off(".dfixed").on("scroll.dfixed",function(){t.scroll()}),t.scroll()},getTarget:function(){var t=this;return t.__target||(t.__target={fixed:function(){var e=$(".tabbar-box, .tabbar-bg",t.tabpanelSelector),i=$(".shop-hd",t.shopSelector),n=$(".cart-hd",t.cartSelector),a=$(".extranav-bd",t.extranavSelector);return e.add(i).add(n).add(a)}(),occupying:function(){var e=$(".tabbar-occupying, .tabbar-bg",t.tabpanelSelector),i=$(".shop-occupying",t.shopSelector);return e.add(i)}()}),t.__target},scroll:function(){var t=this,e=$(t.tabpanelSelector),i=e.length?e.offset().top:0,n=t.$win.scrollTop(),a=n>=i,s=t.getTarget();a!==t.__preIsFixed&&(t.__preIsFixed=a,s.fixed.toggleClass("ui-fixed",a),s.occupying.toggleClass("ui-hide",!a))}},window.__CFixed}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(7);n=[],a=function(){var t={$container:null,_defaults:{events:{switchBefore:function(t){},switchAfter:function(t){}}},settings:null,_initElem:function(){this.$container=$("#J_ModuleTabpanel")},_event:function(){var t=this;$(".tabbar-list",t.$container).off(".tab").on("click.tab","li[data-panels]",function(){t._eventSwitch(this)}),$(".qrcode",t.$container).off(".qc").on("mouseenter.qc",function(){var t=$(this);t.addClass("active"),t.data("isadd")||(t.data("isadd",!0),$(".qrcode-pic",this).html(function(){var t="";if(s.getPageTypeIsItem())t="http://m.mogujie.com/x6/detail/"+s.getItemId();else{if(!s.getPageTypeIsRush())return"";t="http://m.mogujie.com/rush/seckill/"+s.getRushId()}return t=encodeURIComponent(t),'<img src="http://www.mogujie.com/trade/item_detail/qrcode?url='+t+'">'}))}).on("mouseleave.qc",function(){var t=$(this);t.removeClass("active")})},_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_eventSwitch:function(t){var e=this,i=$(t),n=i.data("panels").split(","),a=i.data("hasnav"),o=!!i.data("isactived");if(0!=n.length){var r={isActived:o,curPanel:n[0],allPanels:n};e._trigger("switchBefore",r),i.addClass("selected").data("isactived","true").siblings("li[data-panels]").removeClass("selected"),$("#J_ModuleExtranav").toggleClass("ui-none",!a),$(".module-panel",e.$container).addClass("ui-none"),$.each(n,function(t,i){var n=$(".module-"+i,e.$container);n.removeClass("ui-none"),0==t&&0!=n.length&&s.goToTabPosition(n)}),e._trigger("switchAfter",r)}},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._event()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(7);n=[],a=function(){var t={$container:null,itemId:null,_initElem:function(){this.$container=$("#J_ModuleShop")},_initData:function(){this.itemId=s.getItemId()},_shopFav:function(t){var e=$(t.currentTarget);e.hasClass("btn-faved");if(!e.data("__isAjaxFav")){e.data("__isAjaxFav",!0);var i=e.attr("data-shopid"),n={callback:function(){e.trigger("click")}};return s.isLogin(n)?void $.ajax({url:"/x6/shop/"+i+"/collectShop",type:"post",dataType:"json",data:null}).done(function(t){1001==t.status.code?"取消收藏成功"===t.result?e.removeClass("btn-faved").addClass("btn-fav").html("收藏店铺"):e.removeClass("btn-fav").addClass("btn-faved").html("已收藏"):$.alert(t.status.msg),e.data("__isAjaxFav",!1)}):void e.data("__isAjaxFav",!1)}},_shopSearch:function(t){var e=$(this),i=$('input[type="text"]',e),n=$.trim(i.val());return""==n?($.alert("请输入你想要搜索的关键词"),!1):void 0},_events:function(){$("#J_ShopFav").on("click",this._shopFav),$("#J_ShopSearch").on("submit",this._shopSearch)},init:function(){this._initElem(),this._initData(),this._events()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(17),o=i(7),r=(i(27),i(28));n=[],a=function(){var t={$container:null,itemId:null,moduleData:null,_isLoaded:!1,_getAjaxParam:function(){return{url:"http://mce.mogujie.com/jsonp/get/2",type:"get",dataType:"jsonp",data:{iidE:this.itemId,pid:5123,plat:"pc",limit:12}}},_initElem:function(){this.$container=$("#J_ModuleRepeat")},_initData:function(){var t=this;this.itemId=o.getItemId();var e=$.extend(!0,{},this._getAjaxParam(),{});$.ajax(e).done(function(e){if(e){if(!e.success)return void console.log("看了又看接口数据获取失败："+e.message);t.moduleData=e.data,t._render(),t._events();var i=e.data.list||[];s.recommender(i)}}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload()},_events:function(){},_initEvent:function(){var t=this,e=$(window);t.$container.length&&e.off(".m-repeat").on("scroll.m-repeat",function(){var i=e.scrollTop()+e.height()+300;!t._isLoaded&&i>t.$container.offset().top&&(t._isLoaded=!0,e.off(".m-repeat"),t._initData())})},init:function(){this._initElem(),this._initEvent()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){"use strict";!function(t,e,i,n){var a=t(e);t.fn.lazyload=function(s){function o(){var e=0;l.each(function(){var i=t(this);if(!d.skip_invisible||i.is(":visible"))if(t.abovethetop(this,d)||t.leftofbegin(this,d));else if(t.belowthefold(this,d)||t.rightoffold(this,d)){if(++e>d.failure_limit)return!1}else i.trigger("appear"),e=0})}var r,l=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(d,s)),r=d.container===n||d.container===e?a:t(d.container),0===d.event.indexOf("scroll")&&r.bind(d.event,function(){return o()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",d.placeholder),i.one("appear",function(){if(!this.loaded){if(d.appear){var n=l.length;d.appear.call(e,n,d)}t("<img />").bind("load",function(){var n=i.attr("data-"+d.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[d.effect](d.effect_speed),e.loaded=!0;var a=t.grep(l,function(t){return!t.loaded});if(l=t(a),d.load){var s=l.length;d.load.call(e,s,d)}}).attr("src",i.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&i.bind(d.event,function(){e.loaded||i.trigger("appear")})}),a.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(i).ready(function(){o()}),this},t.belowthefold=function(i,s){var o;return o=s.container===n||s.container===e?(e.innerHeight?e.innerHeight:a.height())+a.scrollTop():t(s.container).offset().top+t(s.container).height(),o<=t(i).offset().top-s.threshold},t.rightoffold=function(i,s){var o;return o=s.container===n||s.container===e?a.width()+a.scrollLeft():t(s.container).offset().left+t(s.container).width(),o<=t(i).offset().left-s.threshold},t.abovethetop=function(i,s){var o;return o=s.container===n||s.container===e?a.scrollTop():t(s.container).offset().top,o>=t(i).offset().top+s.threshold+t(i).height()},t.leftofbegin=function(i,s){var o;return o=s.container===n||s.container===e?a.scrollLeft():t(s.container).offset().left,o>=t(i).offset().left+s.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document)},function(t,e){t.exports='<!-- 看了又看 -->\n<!-- \n    注：PHP模板走的是本地模板文件：views/modules/module-repeat.php\n-->\n\n<!-- 看了又看信息 -->\n{{?it.list && it.list.length}}\n<div class="ui-box repeat-info">\n    <h3 class="ui-hd">看了又看</h3>\n    <div class="ui-bd">\n        <!-- 列表 -->\n        <ul class="repeat-list">\n            {{~it.list:item:index}}\n              <li data-id="{{=item.item_id}}">\n                  <a class="pic" href="{{=item.item_url}}" target="_blank">\n                      <img class="lazy" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif" data-original="{{=item.image}}_220x330.jpg">\n                  </a>\n                  <a class="title" href="{{=item.item_url}}" target="_blank">{{=item.title}}</a>\n                  <div class="info">\n                      <div class="price">\n                          <em class="price-u">¥</em>\n                          <span class="price-n">{{=item.discountPrice}}</span>\n                      </div>\n                      <div class="fav">\n                          <em class="fav-i"></em>\n                          <span class="fav-n">{{=item.cfav}}</span>\n                      </div>\n                  </div>\n              </li>\n            {{~}}\n        </ul>\n    </div>\n</div>\n{{?}}'},function(t,e,i){var n,a,s=i(7),o=(i(27),i(30));n=[],a=function(){var t={_defaults:{events:{loading:function(t){},loaded:function(t){}}},settings:null,$container:null,itemId:null,moduleData:null,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getAjaxParam:function(){return{url:"/ajax/mgj.pc.detailinfo/v1",type:"get",dataType:"json",data:{_ajax:1,itemId:this.itemId}}},_initElem:function(){this.$container=$("#J_ModuleGraphic")},_initData:function(){var t=this;t.itemId=s.getItemId();var e=$.extend(!0,{},this._getAjaxParam(),{});t._trigger("loading",{}),$.ajax(e).done(function(e){return e.success?(t.moduleData=e.data,t._render(),t._events(),void t._trigger("loaded",{moduleData:e.data})):void console.log("图文详情接口数据获取失败："+e.message)}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload()},_events:function(){var t=$("#J_ParameterTable");t.off(".more").on("click.more","a.more",function(){var t=$(this),e=t.parent("td");$curTR=e.parent("tr"),$nextTRs=$curTR.nextAll("tr.ui-none"),e.text(function(){return t.data("text")}),$nextTRs.removeClass("ui-none")})},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initData()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 图文详情 -->\n<!-- \n    注：PHP模板走的是本地模板文件：views/modules/module-graphic.php\n-->\n\n<!-- 商品描述 -->\n{{?it.detailInfos && it.detailInfos.desc}}\n  <div id="J_Graphic_desc">\n      <div class="panel-title">\n          <h1>商品描述</h1>\n      </div>\n      <!-- 描述 -->\n      {{?it.detailInfos.desc}}\n      <div class="graphic-text">{{=it.detailInfos.desc}}</div>\n      {{?}}\n  </div>\n{{?}}\n\n<!-- 产品参数 -->\n{{?it.itemParams && it.itemParams.info}}\n  <div id="J_Graphic_{{=it.itemParams.info.key}}">\n      <div class="panel-title">\n          <h1>{{=it.itemParams.info.key}}</h1>\n      </div>\n      <!-- 产品参数 -->\n      <div class="graphic-block">\n            <!-- 描述 -->\n           {{?it.itemParams.info.desc}}\n             <div class="graphic-text">{{=it.itemParams.info.desc}}</div>\n           {{?}}\n         \n          {{?it.itemParams.info.set && it.itemParams.info.set.length > 0}}\n          <!-- 表格 -->\n            <table class="parameter-table" id="J_ParameterTable">\n                <tbody>\n                {{~it.itemParams.info.set:data:index}}\n                  \n                  {{?index % 3 == 0}}\n                    <tr class="{{?index >= 18}}ui-none{{?}}">\n                  {{?}}\n                  \n                    {{?index == 17}}\n                      <td><a class="more" href="javascript:;" data-text="{{=data.key}}: {{=data.value}}">更多参数<i></i></a></td>\n                    {{??}}\n                      <td>{{=data.key}}: {{=data.value}}</td>\n                    {{?}}\n                    \n                  {{?index % 3 == 2 || index == it.itemParams.info.set.length - 1}}\n                    </tr>\n                  {{?}}\n                  \n                {{~}}\n                </tbody>\n            </table>\n          {{?}}\n          \n          {{?it.itemParams.info.images && it.itemParams.info.images.length > 0}}\n                <!-- 图片列表 -->\n                {{~it.itemParams.info.images:imgURL}}\n                  {{\n                    var imgSize = __CUtil.getImgSize(imgURL, 700);\n                    var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n                  }}\n                    <div class="graphic-pic">\n                        <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                            <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                        </div>\n                    </div>\n                {{~}}\n          {{?}}\n      </div>\n  </div>\n{{?}}\n\n<!-- 模块级别 -->\n{{?it.detailInfos}}\n  <div class="graphic-block">\n    {{?it.detailInfos.detailImage && it.detailInfos.detailImage.length > 0}}\n      <!-- 图片列表 -->\n      {{~it.detailInfos.detailImage:image}}\n        <div id="J_Graphic_{{=image.key}}">\n            <div class="panel-title">\n                <h1>{{=image.key}}</h1>\n            </div>\n            <!-- 描述 -->\n            {{?image.desc}}\n               <div class="graphic-text">{{=image.desc}}</div>\n            {{?}}\n              {{~image.list:imgURL}}\n                {{\n                  var imgSize = __CUtil.getImgSize(imgURL, 700);\n                  var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n                }}\n                \n                <div class="graphic-pic">\n                    <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                        <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                    </div>\n                </div>\n                {{~}}\n         </div>\n      {{~}}\n    {{?}}\n  </div>\n{{?}}\n\n<!-- 尺码说明 -->\n{{?it.itemParams && it.itemParams.rule}}\n  <div id="J_Graphic_{{=it.itemParams.rule.key}}">\n      <div class="panel-title">\n          <h1>{{=it.itemParams.rule.key}}</h1>\n      </div>\n      <!-- 尺码说明 -->\n      <div class="graphic-block">\n\n          <!-- 描述 -->\n          {{?it.itemParams.rule.desc}}\n             <div class="graphic-text">{{=it.itemParams.rule.desc}}</div>\n          {{?}}\n\n          <!-- 表格 -->\n          {{?it.itemParams.rule.tables && it.itemParams.rule.tables.length > 0}}\n            <table class="size-table">\n                {{~it.itemParams.rule.tables:data:index}}\n                      <thead>\n                          {{~data:key:index}}\n                            {{?index == 0}}  \n                                <tr>\n                                    {{~key:item}}\n                                    <td>{{=item}}</td>\n                                    {{~}}\n                                </tr>\n                              {{?}}\n                          {{~}}\n                      </thead>\n                      <tbody>\n                          {{~data:key:index}}\n                              {{?index >= 1}}\n                                  <tr>\n                                      {{~key:item}}\n                                      <td>{{=item}}</td>\n                                      {{~}}\n                                  </tr>\n                              {{?}}\n                          {{~}}\n                      </tbody>\n                {{~}}\n            </table>\n          {{?}}\n          \n          {{?it.itemParams.rule.images && it.itemParams.rule.images.length > 0}}\n            <!-- 图片列表 -->\n            {{~it.itemParams.rule.images:imgURL}}\n              {{\n                var imgSize = __CUtil.getImgSize(imgURL, 700);\n                var imgTURL = __CUtil.getImgThumbnailUrl(imgURL, 750, 999);\n              }}\n              <div class="graphic-pic">\n                  <div class="pic-box" style="padding-bottom:{{=imgSize.hwPercent}}%;">\n                      <img class="lazy" style="left:-{{=imgSize.width / 2}}px;" data-original="{{=imgTURL}}" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif"/>\n                  </div>\n              </div>\n            {{~}}\n          {{?}}\n          \n          <!-- 提醒 -->\n          {{?it.itemParams.rule.disclaimer}}\n             <div class="size-text">{{=it.itemParams.rule.disclaimer}}</div>\n          {{?}}\n      </div>\n  </div>\n{{?}}\n\n';
},function(t,e,i){var n,a,s=i(7),o=(i(32),i(33));window.log_stat_url_tmp=window.log_stat_url_tmp||"",n=[],a=function(){var t={$ratesBuyerBox:null,$ratesBuyerList:null,postParams:{pageSize:20,sort:1,isNewDetail:1,itemId:s.getItemId(),type:1},init:function(){this._initElem(),this.showImg(),this.switchTags(),this.switchPage(),this.switchExplain(),this.getComments(),this.showComments()},_initElem:function(){this.$ratesBuyerBox=$("#J_RatesBuyer"),this.$ratesBuyerList=$("#J_RatesBuyerList")},_render:function(t,e){var i=t.data||{},n=this.$ratesBuyerList,a=MoGu.ui.getTemplate(o,i);n.html(a);var s=i.extra||{};if(s&&s.totalPages>1){var r={page:"__id__"},l=$.extend(!0,{},e||{},r),d=$.map(l,function(t,e){return[e,t].join("=")}).join("&"),c="/ajax/pc.rate.ratelist/v1?"+d;$(".pagination",n).pagination(10*s.totalPages,{current_page:Number(s.currentPage||1)-1,num_display_entries:5,num_edge_entries:1,prev_text:"<",next_text:"下一页>",link_to:c,callback:function(){return!0}})}},showImg:function(){$(document).on("click",".show-img li",function(){var t=$(this).closest(".show-img"),e=t.find(".big-img"),i=$(this).find("img")[0].src;$(this).hasClass("c")?($(this).removeClass("c"),e.removeClass("c").slideUp()):($(this).addClass("c").siblings().removeClass("c"),e.find("img").attr("src",i.replace("100x100","468x468")),e.addClass("c").slideDown())}).on("click",".show-img .big-img",function(){$(this).hasClass("c")?($(this).removeClass("c").slideUp(),$(this).closest(".show-img").find("li").removeClass("c")):$(this).slideDown()})},switchTags:function(){var t=this,e=t.$ratesBuyerBox;e.on("click",".tags a",function(){e.find(".nav a").removeClass("c"),$(this).hasClass("c")?($(this).removeClass("c"),delete t.postParams.emotion,delete t.postParams.property):($(this).addClass("c").siblings("a").removeClass("c"),t.postParams.emotion=$(this).attr("data-emotion"),t.postParams.property=$(this).attr("data-property"),delete t.postParams.isImg),MOGU&&MOGU.Globe_Trace_Log("shop-detail-comment-tags"),t.getComments()}).on("click",".tags .all",function(){var t=$(this).closest(".tags"),e=t.find(".list");$(this).find("b").toggleClass("c"),e.hasClass("show")?e.removeClass("show"):e.addClass("show")})},switchPage:function(){var t=this,e=t.$ratesBuyerBox;t.$ratesBuyerList;e.on("click",".pagination a",function(i){i.preventDefault();var n=$(this).attr("href");if(n&&""!=n){var a=$.extend(!0,{},t.postParams||{});$.ajax({url:n,type:"GET",dataType:"JSON",data:{isNewDetail:1}}).done(function(i){i.success&&(t._render(i,a),s.goToTabPosition(e))})}})},switchExplain:function(){var t=this,e=t.$ratesBuyerBox,i=['<div class="info-z seller-explain clearfix">','<span class="fl">商家回复：</span>','<div class="content">',"{{=it.content}}","</div>",'<span class="date fr">{{=it.date}}</span>',"</div>"].join("");e.on("click",".show-explain",function(){$(this).closest(".item").find(".explain-box").show()}).on("click",".explain-submit",function(){var t={},e=$(this).closest(".item");return t.rateId=$(this).attr("data-id"),t.comment=$.trim(e.find(".explain-text").val()),""==t.comment?void $.alert("请输入回复内容"):(t.isNewDetail=1,void $.ajax({url:"/trade/rate/explain",type:"POST",dataType:"JSON",data:t}).done(function(n){null==n?alert(MGLANG.msgTimeout):1001==n.status.code?(e.find(".show-explain").remove(),e.find(".explain-box").after(MoGu.ui.getTemplate(i,{content:t.comment,date:n.result.date})).remove()):alert(n.status.msg)}))})},getComments:function(){var t=this,e=t.$ratesBuyerList,i=$.extend(!0,{},t.postParams||{});0!=e.length&&$.get("/ajax/pc.rate.ratelist/v1",t.postParams,function(e,n,a){e.success&&t._render(e,i)},"json")},showComments:function(){var t=this,e=t.$ratesBuyerBox;e.on("click",".nav a:not(.disable)",function(){e.find(".tags a").removeClass("c"),$(this).hasClass("c")||($(this).addClass("c").siblings("a").removeClass("c"),"img"==$(this).attr("data-type")?t.postParams.isImg=1:delete t.postParams.isImg,delete t.postParams.emotion,delete t.postParams.property,t.getComments())}).on("click",".J_CommentSort",function(){t.postParams.sort=$(this).attr("data-type"),MOGU&&MOGU.Globe_Trace_Log(1==t.postParams.sort?"shop-detail-comment-sort-default":"shop-detail-comment-sort-time"),t.getComments()})}},e={$ratesOrderBox:null,$ratesOrderList:null,switchPage:function(){var t=this,e=t.$ratesOrderBox,i=t.$ratesOrderList;e.on("click",".pagination a",function(t){t.preventDefault();var n=$(this).attr("href");n&&""!=n&&$.ajax({url:n,type:"POST",dataType:"JSON",data:{isNewDetail:1}}).done(function(t){null==t?alert(MGLANG.msgTimeout):1001==t.status.code?(i.html(t.result.html),s.goToTabPosition(e)):alert(t.status.msg)}).fail(function(){}).always(function(){})})},getSales:function(){},_initElem:function(){this.$ratesOrderBox=$("#J_RatesOrder"),this.$ratesOrderList=$("#J_RatesOrderList")},init:function(){this._initElem(),this.switchPage()}};return{init:function(){t.init(),e.init()}}}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){"use strict";jQuery.fn.pagination=function(t,e){return e=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,callback:function(){return!1}},e||{}),this.each(function(){function i(){return Math.ceil(t/e.items_per_page)}function n(){var t=Math.ceil(e.num_display_entries/2),n=i(),a=n-e.num_display_entries,s=o>t?Math.max(Math.min(o-t,a),0):0,r=o>t?Math.min(o+t,n):Math.min(e.num_display_entries,n);return[s,r]}function a(t,i){o=t,s();var n=e.callback(t,r);return n||(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0),n}function s(){r.empty();var t=n(),a=i(),s=function(t,i){if(t=0>t?0:a>t?t:a-1,i=jQuery.extend({text:t+1,classes:""},i||{}),t==o){if(i.text==e.prev_text||i.text==e.next_text)return;var n=jQuery("<a class='c'>"+i.text+"</a>")}else var n=jQuery("<a>"+i.text+"</a>").attr("rel","nofollow").attr("href",e.link_to.replace(/__id__/,t+1));i.classes&&n.addClass(i.classes),r.append(n)};if(e.prev_text&&(o>0||e.prev_show_always)&&s(o-1,{text:e.prev_text,classes:""}),t[0]>0&&e.num_edge_entries>0){for(var l=Math.min(e.num_edge_entries,t[0]),d=0;l>d;d++)s(d);e.num_edge_entries<t[0]&&e.ellipse_text&&jQuery("<i>"+e.ellipse_text+"</i>").appendTo(r)}for(var d=t[0];d<t[1];d++)s(d);if(t[1]<a&&e.num_edge_entries>0){a-e.num_edge_entries>t[1]&&e.ellipse_text&&jQuery("<i>"+e.ellipse_text+"</i>").appendTo(r);for(var c=Math.max(a-e.num_edge_entries,t[1]),d=c;a>d;d++)s(d)}e.next_text&&(a-1>o||e.next_show_always)&&s(o+1,{text:e.next_text,classes:""})}var o=e.current_page;t=!t||0>t?1:t,e.items_per_page=!e.items_per_page||e.items_per_page<0?1:e.items_per_page;var r=jQuery(this);this.selectPage=function(t){a(t)},this.prevPage=function(){return o>0?(a(o-1),!0):!1},this.nextPage=function(){return o<i()-1?(a(o+1),!0):!1},s(),e.callback(o,this)})}},function(t,e){t.exports='<!--详情页交易评价列表-->\n{{?it.list && it.list.length > 0}}\n  {{~it.list :item: index}}\n    <div class="item clearfix" data-id="{{=item.id}}">\n        <div class="info">\n            <div class="info-w">\n                <!-- 评价用户、时间 -->\n                <div class="info-t clearfix">\n                    {{?item.userInfo && item.userInfo.uname}}\n                    <span class="name">{{=item.userInfo.uname}}</span>\n                    {{?}}\n                    <span class="date">{{=item.formatDate || \'\'}}</span>\n                </div>\n                \n                <!-- 评价内容 -->\n                <div class="info-m">{{=item.content || \'\'}}</div>\n                \n                <!-- 商品属性 -->\n                <div class="info-b clearfix">\n                    {{?item.stock}}\n                      {{~item.stock :text}}\n                      <span>{{=text}}</span>\n                      {{~}}\n                    {{?}}\n                    \n                    {{?it.isCanExplain && item.canExplain}}\n                    <a href="javascript:;" class="show-explain">商家回复</a>\n                    {{?}}\n                    <!-- <a href="http://www.mogujie.com/apps" target="_blank" class="from-ios shop-detail-icons comment-mt">来自iOS客户端</a> -->\n                    <!-- <a href="http://www.mogujie.com/apps" target="_blank" class="from-android shop-detail-icons comment-mt">来自Android客户端</a> -->\n                </div>\n\n                <!-- 商家回复输入 -->\n                {{?it.isCanExplain && item.canExplain}}\n                <div class="info-e explain-box clearfix">\n                    <input type="text" class="explain-text"><a href="javascript:;" class="explain-submit" data-id="{{=item.id}}">确定</a>\n                </div>\n                {{?}}\n\n                <!-- 晒图 S -->\n                {{?item.images && item.images.length > 0}}\n                <div class="info-k show-img">\n                    <ul class="list clearfix">\n                        {{~item.images :image}}\n                        <li>\n                            <div class="img-box">\n                                <span>\n                                    <img src="{{=image}}_100x100.jpg" width="40">\n                                </span>\n                            </div>\n                        </li>\n                        {{~}}\n                    </ul>\n                    <div class="big-img">\n                        <div class="img-box">\n                            <span>\n                                <img src="about:blank" height="400">\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                {{?}}\n                <!-- 晒图 E -->\n\n                {{var _append = item.append;}}\n                {{?_append}}\n  				        <div class="info-l"></div>\n                  <!-- 追加评价 -->\n                  <div class="info-z clearfix">\n                      <span class="fl">追加评价：</span>\n                      <div class="content">{{=_append.content || \'\'}}</div>\n                      <span class="date fr">确认收货后{{=_append.formatDate || \'\'}}追加</span>\n                  </div>\n                  {{?_append.images && _append.images.length}}\n                  <div class="info-k show-img">\n                      <ul class="list clearfix">\n                          {{~_append.images :image}}\n                          <li>\n                              <div class="img-box">\n                                  <span>\n                                      <img src="{{=image}}_100x100.jpg" width="40">\n                                  </span>\n                              </div>\n                          </li>\n                          {{~}}\n                      </ul>\n                      <div class="big-img">\n                          <span>\n                              <img src="about:blank" height="400">\n                          </span>\n                      </div>\n                  </div>\n                  {{?}}\n                {{?}}\n\n        				{{var _explain = item.explain;}}\n                {{?_explain}}\n        				<!-- 商家回复 -->\n        				<div class="info-z seller-explain clearfix">\n          					<span class="fl">商家回复：</span>\n          					<div class="content">{{=_explain.content}}</div>\n          					<span class="date fr">{{=_explain.formatDate}}</span>\n        				</div>\n        				{{?}}\n            </div>\n        </div>\n        <div class="face">\n          {{?item.userInfo && item.userInfo.avatar}}\n            <img src="{{=item.userInfo.avatar}}_64x64.jpg">\n          {{?}}\n        </div>\n    </div>\n  {{~}}\n{{?}}\n    \n<div class="pagination"></div>\n'},function(t,e,i){var n,a,s=i(17),o=i(7),r=(i(27),i(35));n=[],a=function(){var t={_defaults:{events:{loading:function(t){},loaded:function(t){}}},settings:null,$container:null,shopId:null,itemId:null,moduleData:null,_isLoaded:!1,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getAjaxParam:function(){return{url:"http://mce.mogujie.com/jsonp/get/2",type:"get",dataType:"jsonp",data:{iidE:this.itemId,pid:5148,plat:"pc",limit:16}}},_initElem:function(){this.$container=$("#J_ModuleRecommend")},_initData:function(){var t=this;this.shopId=o.getShopId(),this.itemId=o.getItemId();var e=$.extend(!0,{},this._getAjaxParam(),{});t._trigger("loading",{}),$.ajax(e).done(function(e){if(e){if(!e.success)return void console.log("本店同类商品接口数据获取失败："+e.message);t.moduleData=e.data,t._render(),t._events();var i=e.data.list||[];s.recommender(i),t._trigger("loaded",{})}}).fail(function(){})},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData);this.$container.html(t),$("img.lazy",this.$container).lazyload()},_events:function(){},_initEvent:function(){var t=this,e=$(window),i=$("#J_ModuleTabpanel");i.length&&e.off(".m-recommend").on("scroll.m-recommend",function(){var n=e.scrollTop()+e.height();!t._isLoaded&&n>i.offset().top&&(t._isLoaded=!0,e.off(".m-recommend"),t._initData())})},init:function(t){this.__init||(this.__init=!0,this.settings=$.extend(!0,{},this._defaults,t||{}),this._initElem(),this._initEvent())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 本店同类商品 -->\n<!-- \n    注：PHP模板走的是本地模板文件：views/modules/module-recommend.php\n-->\n\n<!-- 本店同类商品列表 -->\n<div id="J_RecommendList">\n    <div class="panel-title recommend-title">\n        <h1>本店同类商品</h1>\n    </div>\n    {{?it.list && it.list.length > 0}}\n    <!-- 本店同类商品列表 -->\n    <div class="recommend-list">\n        <!-- 列表 -->\n        <ul>\n            {{~it.list:item:index}}\n            <li>\n                <a class="pic" href="{{=item.item_url}}" target="_blank">\n                    <img class="lazy" src="http://m.mogujie.com/img/imgwap/loading_alpha.gif" data-original="{{=item.image}}_220x330.jpg">\n                </a>\n                <a class="title" href="{{=item.item_url}}" target="_blank">{{=item.title}}</a>\n                <div class="info">\n                    <div class="price">\n                        <em class="price-u">¥</em>\n                        <span class="price-n">{{=item.discountPrice}}</span>\n                    </div>\n                    <div class="fav">\n                        <em class="fav-i"></em>\n                        <span class="fav-n">{{=item.cfav}}</span>\n                    </div>\n                </div>\n            </li>\n            {{~}}\n        </ul>\n    </div>\n    {{??}}\n    <div class="module-empty" style="margin-bottom: 40px;">暂无本店同类商品</div>\n    {{?}}\n</div>'},function(t,e,i){var n,a,s=i(7),o=i(37);n=[],a=function(){var t={$win:null,$container:null,moduleData:null,positionData:[],tabBarHeight:59,_initData:function(t){this.moduleData=$.extend(!0,{},t||{}),this.moduleData.__={hasRecommend:this._getHasRecommend()}},_initElem:function(){this.$win=$(window),this.$container=$("#J_ModuleExtranav .extranav-bd"),this._render()},_render:function(){var t=MoGu.ui.getTemplate(o,this.moduleData);this.$container.html(t),this._defaultSelected(),this._graphicPosition()},_defaultSelected:function(){$("li[data-module]:first",this.$container).addClass("selected")},_getHasRecommend:function(){var t=s.getPageTypeIsSeckill();return!t},_events:function(){var t=this;$(".extranav-list",this.$container).off(".nav").on("click.nav","li",function(){t._eventGoTo(this)}),t.$win.off(".extranav-follow").on("scroll.extranav-follow",function(){t._eventFollow()}),t._eventFollow()},_eventFollow:function(){for(var t=this,e=t.$win.scrollTop(),i=null,n=t.positionData.length-1;n>=0;n--)if(i=t.positionData[n],!(e+t.tabBarHeight<i.top)){if(t.__curModuleId==i.moduleId)break;t.__curModuleId=i.moduleId;var a=$('.extranav-list li[data-module="'+i.moduleId+'"]',t.$container);a.addClass("selected").siblings("li").removeClass("selected");break}},_eventGoTo:function(t){var e=$(t),i=$("#"+e.data("module"));return e.addClass("selected").siblings("li").removeClass("selected"),0!=i.length&&s.goToTabPosition(i),!1},_graphicPosition:function(){var t=this,e=$(".extranav-list li",this.$container),i=e.map(function(){return $(this).data("module")});$.map(i,function(e,i){t._addPositonDataByModuleId(e)})},_addPositonDataByModuleId:function(t){var e=$("#"+t);if(0!=e.length){var i=e.offset().top;this.positionData.push({moduleId:t,top:i})}},addPositonDataForRecommend:function(){this.__init&&0!=this.positionData.length&&this._addPositonDataByModuleId("J_RecommendList")},init:function(t){this.__init||(this.__init=!0,this._initData(t),this._initElem(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 模块-扩展导航栏 -->\n<!-- \n    注：PHP模板走的是本地模板文件：views/modules/module-extranav.php\n-->\n\n<!-- 子导航列表 -->\n<ul class="extranav-list">\n    \n    <!-- 商品描述 -->\n    {{?it.detailInfos && it.detailInfos.desc}}\n    <li data-module="J_Graphic_desc">\n        <a href="javascript:;">商品描述</a>\n    </li>\n    {{?}}\n\n    <!-- 产品参数 -->\n    {{?it.itemParams && it.itemParams.info}}\n    <li data-module="J_Graphic_{{=it.itemParams.info.key}}">\n        <a href="javascript:;">{{=it.itemParams.info.key}}</a>\n    </li>\n    {{?}}\n\n    <!-- 模块列表 -->\n    {{?it.detailInfos && it.detailInfos.detailImage && it.detailInfos.detailImage.length > 0}}\n      {{~it.detailInfos.detailImage:image}}\n        <li data-module="J_Graphic_{{=image.key}}">\n            <a href="javascript:;">{{=image.key}}</a>\n        </li>\n      {{~}}\n    {{?}}\n\n    <!-- 尺码说明 -->\n    {{?it.itemParams && it.itemParams.rule}}\n    <li data-module="J_Graphic_{{=it.itemParams.rule.key}}">\n        <a href="javascript:;">{{=it.itemParams.rule.key}}</a>\n    </li>\n    {{?}}\n    \n    {{?it.__.hasRecommend}}\n    <!-- 本店同类商品 -->\n    <li data-module="J_RecommendList">\n        <a href="javascript:;">商品推荐</a>\n    </li>\n    {{?}}\n\n</ul>\n'},function(t,e,i){var n,a,s=i(7);n=[],a=function(){var t={$container:null,itemId:null,_initElem:function(){this.$container=$("#J_ModuleCart")},_initData:function(){this.itemId=s.getItemId()},_add:function(){$(window).scrollTop(function(){return $(".shop-detail").offset().top}),$("#J_BuyCart:visible").trigger("click"),$(".J_PannelOK:visible").eq(0).trigger("click")},_events:function(){$(".cart-name",this.$container).on("click",this._add)},init:function(){this._initElem(),this._initData(),this._events()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(7),o=i(40),r=i(41),l=i(42);n=[],a=function(){var t={$container:null,itemId:null,rushId:null,moduleData:{state:0,countdown:0,__buy:null},_initData:function(){this.itemId=s.getItemId(),this.rushId=s.getRushId(),this.moduleData=$.extend(!0,{},this.moduleData,s.getRushData()||{}),this.moduleData.__buy={state:this._getBuyState(this.moduleData.state)}},_initElem:function(){this.$container=$("#J_ModuleRushBuy"),this._beforeFiveMinu(),this._updateCountDown()},_render:function(){var t=this;t.$container.html(function(){return MoGu.ui.getTemplate(r,t.moduleData)})},_beforeFiveMinu:function(){var t=this,e=t.moduleData;if(0==e.state){var i=e.countdown;if(300>=i)return void t._updateForState(4);clearInterval(t.timer),t.timer=setInterval(function(){i-=1,300>=i&&(clearInterval(t.timer),t._updateForState(4))},1e3)}},_updateCountDown:function(){function t(){return i&&i.length?i:$('span[data-type="countdown"]',e.$container)}var e=this,i=null,n=e.moduleData.__buy,a=e.moduleData.countdown;0>a||3==n.state||(o.init({timeStamp:a,events:{loop:function(e){t().html(e.content)},done:function(t){1==n.state||2==n.state?e._updateForState(3):location.href=location.href}}}),o.start())},_getRefreshParam:function(){var t={url:"/trade/item_detail/rushrefresh?rushid="+this.rushId,type:"get",dataType:"text",data:{_ajax:1}};return s.getQueryString("_state")&&(t.data._state=s.getQueryString("_state")),s.getQueryString("_countdown")&&(t.data._countdown=s.getQueryString("_countdown")),t},_refresh:function(t){function e(t){if(2==t||4==t){var e=i.__waitMilliseconds-1e3;e>0?(i._updateForState(t),i.__isRefresh=!1):(clearTimeout(i.__timer1),i.__timer1=setTimeout(function(){i._updateForState(t),i.__isRefresh=!1},Math.abs(e)))}else i._updateForState(t),i.__isRefresh=!1}var i=this,n=t.data("state");if(!i.__isRefresh){i.__isRefresh=!0,i.__waitMilliseconds=0,clearInterval(i.__timer2),i.__timer2=setInterval(function(){i.__waitMilliseconds+=100,i.__waitMilliseconds>1e3&&clearInterval(i.__timer2)},100),t.addClass("buy-loading").html("<em>正在刷新<i></i></em>");var a=$.extend(!0,i._getRefreshParam(),{});$.ajax(a).done(function(t){try{t=JSON.parse(t.replace(/\\"/gim,'"')),console.log("esi 更新数据如下："),console.log(t)}catch(a){}if("string"==typeof t)return void e(n);if(1001==t.status.code){var s=t.result,o=i._getBuyState(s.state);0==o&&s.countdown<=300?e(4):1==o?location.href=location.href:e(o)}else e(n),$.alert(t.result||t.status.msg,2e3)}).fail(function(){e(n)})}},_updateForState:function(t){var e=this,i=e.moduleData,n=i.__buy;n.state=t,e.$container.html(function(){return MoGu.ui.getTemplate(r,i)}),3!=t&&o.update()},_getBuyState:function(t){switch(t){case 0:return 0;case 1:return 1;case 4:return 2;case 2:case 3:return 3;default:return t}},_events:function(){var t=this;t.$container.on("rushbuy",'a[data-type="buynow"]',function(){var e=$(this),i=e.data("params"),n={callback:function(){e.trigger("rushbuy")}};e.hasClass("buy-disabled")||s.isLogin(n)&&t._buyOrder(i)}),t.$container.off(".rf").on("click.rf",'a[data-type="refresh"]',function(){t._refresh($(this))})},_buyOrder:function(t){var e=this,i={rushId:e.rushId,skuId:t.id};e.__isAjaxOrder||(e.__isAjaxOrder=!0,$.ajax({url:"/rush/buy",type:"post",dataType:"json",data:i}).done(function(i){i&&(1001==i.status.code?(e._showProcessBox(),e._checkResult(t)):$.alert(i.result||i.status.msg,1e3))}).fail(function(){$.alert("很抱歉，抢购失败！",1e3)}).always(function(){e.__isAjaxOrder=!1}))},_showProcessBox:function(){var t={title:" ",lightBoxId:"J_RushProcessBox",contentHtml:l,scroll:!1,isBgClickClose:!1},e=new MGLightBox(t);e.init(),$("#J_RushProcessBox").find(".lb_hd").remove()},_checkResult:function(t){function e(){$("#J_RushProcessBox").remove(),clearInterval(n),a.__isAjaxCheck=!1}var i,n,a=this,s=0;a.__isAjaxCheck||(a.__isAjaxCheck=!0,n=setInterval(function(){i?e():$.ajax({url:"/rush/fetch_result",type:"POST",dataType:"json",data:{iid:a.itemId,rushId:a.rushId,skuId:t.id}}).done(function(t){1001==t.status.code?t.result&&t.result.orderId?(i=t.result.orderId,location.href="http://www.mogujie.com/trade/orderpay/index?orderId="+t.result.orderId):(s+=1,s>=5&&(e(),$.alert("很抱歉，抢购失败！"))):(e(),$.alert(t.result.msg||t.status.msg))}).fail(function(){e(),$.alert("很抱歉，抢购失败！")})},2e3))},init:function(){s.getPageTypeIsRush()&&(this._initData(),this._initElem(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s=i(7);n=[],a=function(){var t={_defaults:{timeStamp:0,events:{loop:function(t){},done:function(t){}}},settings:null,_trigger:function(t,e){var i=this;if(i.settings&&i.settings.events){var n=i.settings.events[t];"function"==typeof n&&n&&n.call(i,e)}},_getContentForRush:function(t){var e,i,n,a,t=t||this.settings.timeStamp;e=t/86400>>>0,i=(t/3600>>>0)-24*e,n=(t/60>>>0)-60*(24*e+i),a=t-60*(60*(24*e+i)+n),e&&(i+=24*e),i=10>i?"0"+i:i,n=10>n?"0"+n:n,a=10>a?"0"+a:a;var s=[i+"时",n+"分",a+"秒"];return s.join("")},_getContent:function(){return s.getPageTypeIsRush()?this._getContentForRush():""},update:function(){this.__isStart&&this._trigger("loop",{content:this._getContent()})},start:function(){var t=this,e=t.settings;t.__isStart||(t.__isStart=!0,t._timer=setInterval(function(){e.timeStamp=e.timeStamp-1,e.timeStamp<0?(clearInterval(t._timer),t.__isStart=!1,t._trigger("done",{content:""})):t._trigger("loop",{content:t._getContent()})},1e3),t._trigger("loop",{content:t._getContent()}))},init:function(t){this.settings=$.extend(!0,{},this._defaults,t||{})}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 快抢购买 -->\n\n{{?it.__buy.state == 0}}\n<!-- 未开始 -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">即将开抢</a>\n<span class="countdown">{{=it.tip.start}}<span data-type="countdown">0时0分0秒</span></span>\n\n{{??it.__buy.state == 1}}\n<!-- 已开始 -->\n<a href="javascript:;" data-type="buynow" class="fl mr20 buy-now buy-btn">立即抢购</a>\n<span class="countdown">{{=it.tip.end}}<span data-type="countdown">0时0分0秒</span></span>\n\n{{??it.__buy.state == 2}}\n<!-- 库存为0，还有未付款（实际状态为4） -->\n<a href="javascript:;" data-type="refresh" class="fl mr20 buy-now buy-btn buy-refresh" data-state="2"><em>还有机会,点击刷新<i></i></em></a>\n<span class="countdown">{{=it.tip.end}}<span data-type="countdown">0时0分0秒</span></span>\n\n{{??it.__buy.state == 3}}\n<!-- 抢购结束（实际状态为2，3） -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">抢购结束</a>\n\n{{??it.__buy.state == 4}}\n<!-- 距开始还有五分钟之内（实际状态为5） -->\n<a href="javascript:;" data-type="refresh" class="fl mr20 buy-now buy-btn buy-refresh" data-state="4"><em>立即刷新<i></i></em></a>\n<span class="countdown">{{=it.tip.start}}<span data-type="countdown">0时0分0秒</span></span>\n\n{{??}}\n<!-- 其他情况 -->\n<a href="javascript:;" class="fl mr20 buy-now buy-btn buy-disabled">立即抢购</a>\n{{?}}'},function(t,e){t.exports='<div class="rush-process">\n    <p class="high">提交成功！</p>\n    <p>订单正在创建，请耐心等待哦~</p>\n    <p><img src="http://s6.mogucdn.com/pic/141020/sp1ku_ieydszrrmvqtknbqmqytambqmeyde_14x14.gif"></p>\n</div>'},function(t,e,i){var n,a,s=i(7),o=i(44);n=[],a=function(){var t={$target:null,$container:null,itemId:null,moduleData:null,_initElem:function(){this.$target=$("#J_PreSaleRulesTarget")},_initData:function(){this.itemId=s.getItemId(),this.moduleData=s.getPreSaleRulesData()},_render:function(){if(null==this.$container){var t=MoGu.ui.getTemplate(o,this.moduleData);$("body").append(t),this.$container=$("#J_ModulePreSaleRules"),this._renderAfterEvents()}},_renderAfterEvents:function(){var t=this;this.$container.hover(function(){t.__isEnter=!0},function(){t.__isEnter=!1})},_showAfterEvents:function(){var t=this;$(window).off(".mpsr").on("resize.mpsr",function(){t._position()}),$("body").off(".mpsr").on("click.mpsr",function(){t.__isShow&&(t.__isEnter||t._toggle())})},_hideAfterEvents:function(){$(window).off(".mpsr"),$("body").off(".mpsr")},_toggle:function(){this.__isShow=!this.__isShow,this.__isShow?(this._render(),this.$container.show(),this._position(),this._showAfterEvents()):(this.$container.hide(),this._hideAfterEvents())},_position:function(){if(this.__isShow){var t=this.$target.offset();this.$container.css({top:t.top+25,left:t.left-300})}},_events:function(){var t=this;this.$target.off("click").on("click",function(){return t._toggle(),!1})},init:function(){s.getPageTypeIsItem()&&(this._initElem(),this._initData(),this._events())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 模块-预售商品规则 -->\n\n<div id="J_ModulePreSaleRules" class="module-presalerules">\n    \n    <!-- 规则盒子 -->\n    <div class="rules-box">\n       \n        <!-- 规则logo -->\n        <div class="rules-logo">\n            <img src="{{=it.img}}" alt="">\n        </div>\n        \n        <!-- 规则箭头 -->\n        <em class="rules-arrow"><i></i></em>\n        \n        <!-- 规则内容 -->\n        <div class="rules-cont">\n            {{?it.rules && it.rules.length > 0}}\n            {{~it.rules: content}}\n            <div class="line">\n                {{=content}}\n            </div>\n            {{~}}\n            {{?}}\n        </div>\n\n    </div>\n</div>'},function(t,e,i){var n,a,s=i(7),o=i(46);n=[],a=function(){var t={moduleData:{__:{type:"",eventBanner:"",isLogin:!1,isWinning:!1,amount:""},winningBG:"http://s18.mogucdn.com/p1/160516/upload_ifrdgztfmzrtsmbzhazdambqmeyde_557x339.png"},$buyCart:null,$tipContainer:null,$resultContainer:null,_initElem:function(){this.$buyCart=$("#J_BuyCart:visible")},_initData:function(){this.moduleData=$.extend(!0,{},this.moduleData,{__:{isLogin:s.getLoginResult()}})},_initEvents:function(){var t=this;this.$buyCart.on("cartluckydraw",function(e){t._joinCartAfter()})},_checkFirstVisitDetail:function(){var t=MoGu.util.getCookie("mogu_detail_ld_visit"),e=s.getUserId()+"-"+s.getFormatDate(new Date,"yyyy-MM-dd");return t!=e||s.getIsDebug()?(MoGu.util.setCookie("mogu_detail_ld_visit",e,{expires:2}),!0):!1},_checkFirstJoinCart:function(){var t=MoGu.util.getCookie("mogu_detail_ld_cart"),e=s.getUserId()+"-"+s.getFormatDate(new Date,"yyyy-MM-dd");return t!=e||s.getIsDebug()?(MoGu.util.setCookie("mogu_detail_ld_cart",e,{expires:2}),!0):!1},_tipRenderAfter:function(){function t(){var t=e.$buyCart.offset();e.$tipContainer.css({top:t.top-40,left:t.left})}var e=this;null!=e.$tipContainer&&(clearInterval(e._timer),e._sleep=0,e._timer=setInterval(function(){t(),e._sleep+=1,e._sleep>20&&clearInterval(e._timer)},500),$(window).off(".cld").on("resize.cld updatePosition.cld",function(){t()}),t())},_tipRender:function(){if(null==this.$tipContainer){var t=detailInfo.listBanner||{},e=t.eventBanner||null;if(e){this.moduleData.__.type="tip",this.moduleData.__.eventBanner=e;var i=MoGu.ui.getTemplate(o,this.moduleData);this.$buyCart.append(i),this.$tipContainer=$("#J_ModuleCartLuckyDrawTip")}}},_tipShow:function(){0!=this.$buyCart.length&&s.getIsShowCartLuckyDrawTips()&&this._tipRender()},_resultPosition:function(){if(null!=this.$resultContainer){var t=$(window).scrollTop(),e=$(window).width(),i=$(window).height(),n=this.$resultContainer.width(),a=this.$resultContainer.height();this.$resultContainer.css({top:t+i/2-a/2,left:e/2-n/2})}},_resultRenderAfter:function(){var t=this;null!=t.$resultContainer&&($(window).off(".mcld").on("resize.mcld",function(){t._resultPosition()}),t.$resultContainer.on("click",".result-close,.result-goto",function(){t._resultHide()}))},_resultRender:function(){this._resultHide(),this.moduleData.__.type="result";var t=MoGu.ui.getTemplate(o,this.moduleData);$("body").append(t),this.$resultContainer=$("#J_ModuleCartLuckyDrawResult"),this._resultRenderAfter()},_resultShow:function(t,e){this.moduleData.__.isWinning=t,this.moduleData.__.amount=e,this._resultRender(),this._resultPosition()},_resultHide:function(){$(window).off(".mcld"),null!=this.$resultContainer&&(this.$resultContainer.remove(),this.$resultContainer=null,$("#J_ModuleCartLuckyDrawMask").remove())},_shopFav:function(){if(s.getLoginResult()){var t=$("#J_ShopFav"),e=t.hasClass("btn-faved"),i=t.data("shopid");e||t.data("__isAjaxFav")||(t.data("__isAjaxFav",!0),$.ajax({url:"/x6/shop/"+i+"/collectShop",type:"post",dataType:"json",data:null}).done(function(e){1001==e.status.code&&("取消收藏成功"===e.result?t.removeClass("btn-faved").addClass("btn-fav").html("收藏店铺"):t.removeClass("btn-fav").addClass("btn-faved").html("已收藏")),t.data("__isAjaxFav",!1)}))}},_joinCartAfter:function(){if(s.getLoginResult()){var t=this;$.ajax({url:"http://www.mogujie.com/game/addshoppingcart/lottery",dataType:"jsonp",data:{marketType:"market_mogujie"},jsonp:"callback",success:function(e){if(1001==e.status.code){if(e.result.win){var i=e.result.amount||0;t._resultShow(!0,i)}}else $.alert(e.status.msg)},error:function(){}})}},init:function(){var t=this;s.getPageTypeIsItem()&&(this._initElem(),this._initData(),this._initEvents(),t._tipShow())}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<!-- 模块-加入购物车抽奖 -->\n\n{{?it.__.type == \'tip\'}}\n\n  <!-- 加入购物车登录提示 -->    \n  {{?it.__.eventBanner.link}}\n  <a id="J_ModuleCartLuckyDrawTip" class="module-cartluckydraw-tip" style="background-image: url({{=it.__.eventBanner.icon}})" href="{{=it.__.eventBanner.link}}" target="_blank"></a>\n  {{??}}\n  <div id="J_ModuleCartLuckyDrawTip" class="module-cartluckydraw-tip" style="background-image: url({{=it.__.eventBanner.icon}})"></div>\n  {{?}}\n\n{{??it.__.type == \'result\'}}\n<!-- 加入购物车抽奖结果 -->    \n<div id="J_ModuleCartLuckyDrawResult" class="module-cartluckydraw-result">\n    <a class="result-close" href="javascript:;"></a>\n    <div class="result-price">\n      <em>¥</em><span>{{=it.__.amount}}</span>\n    </div>\n    <p class="result-draw-redpack">恭喜你，获得{{=it.__.amount}}元红包！</p>\n    <p class="result-draw-text">可前往“616红包”查看，可与平台现金券叠加使用。</p>\n    <!-- <a class="result-goto" href="{{=it.couponPageLink}}" target="_blank"></a> -->\n    <a class="result-goto" href="javascript:;"></a>\n    <div class="result-draw-bg" style="background-image: url({{=it.winningBG}});"></div>\n</div>\n<!-- 遮罩层 -->\n<div id="J_ModuleCartLuckyDrawMask" class="module-cartluckydraw-mask"></div>\n{{?}}';
},function(t,e,i){var n,a,s=i(7),o=i(48),r=i(51);n=[],a=function(){var t={$dapeiContainer:null,moduleData:null,init:function(){s.getPageTypeIsItem()&&$("#dapeiShow")&&"nodapei"===$("#dapeiShow").val()&&(this._initElem(),this._initData())},_initElem:function(){this.$dapeiContainer=$("#J_ModuleDapei")},_initData:function(){var t=this;t.itemId=s.getItemId(),t.sellerId=s.getSellerId(),$.ajax({url:"/promotion/collocationset/list",type:"get",dataType:"json",data:{_ajax:1,iid:t.itemId,sellerId:t.sellerId}}).done(function(e){return 1001!=e.status.code?void console.log("搭配购接口数据获取失败："+(e.result||e.status.msg)):(t.moduleData=e.result,t.moduleData.channel="channel_dapei",t._transformData(t.itemId),t._render(),t._initEvents(),void t._initSku())}).fail(function(){})},_transformData:function(t){var e=this.moduleData.collcationSet;this.moduleData.collcationSet.forEach(function(i,n){var a=[];i.collocationSetItemGroupDTOs.forEach(function(e,i){e.iid===t&&a.push(e)}),i.collocationSetItemGroupDTOs.forEach(function(e,i){e.iid!==t&&a.push(e)}),e[n].collocationSetItemGroupDTOs=a}),this.moduleData.collcationSet=e},_render:function(){var t=MoGu.ui.getTemplate(r,this.moduleData),e=this.$dapeiContainer.parent();this.$dapeiContainer.html(t),this.moduleData.collcationSet.length>0&&e.show(1e3)},_initEvents:function(){var t=this;$(".dapei-tab-item");$(".dapei-tab-item",t.$dapeiContainer).off(".tab").on("click.tab",function(t){$(this).siblings("li").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-mark");$(".dapei-item").removeClass("dapei-show"),$(".dapei-item").removeClass("dapei-hide"),$('.dapei-item[data-mark!="'+e+'"]').addClass("dapei-hide"),$('.dapei-item[data-mark="'+e+'"]').addClass("dapei-show")}),$(".dapei-page-up",t.$dapeiContainer).off(".pageup").on("click.pageup",function(e){var i=$(".dapei-tab-item.active").attr("data-mark"),n=$('.dapei-item[data-mark="'+i+'"]'),a=($(".dapei-body-items",n).attr("data-page-all"),$(".dapei-body-items",n).attr("data-page-now"));a>1&&(a--,t.$dapeiContainer.trigger("dapeiShow",[a,n]))}),$(".dapei-page-down",t.$dapeiContainer).off(".pagedown").on("click.pagedown",function(e){var i=$(".dapei-tab-item.active").attr("data-mark"),n=$('.dapei-item[data-mark="'+i+'"]'),a=$(".dapei-body-items",n).attr("data-page-all"),s=$(".dapei-body-items",n).attr("data-page-now");a>s&&(s++,t.$dapeiContainer.trigger("dapeiShow",[s,n]))}),$(".dapei-sku-select",t.$dapeiContainer).off(".skuselect").on("click.skuselect",function(e,i){if("true"!==i)if("false"===$(this).attr("show-body")){$(this).attr("show-body","true"),$(this).parent().siblings(".dapei-body-items-item").children(".dapei-sku-select").attr("show-body","false"),$(this).parent().siblings(".dapei-body-items-item").children(".dapei-sku-body").hide(),$(this).siblings(".dapei-sku-body").show();var n=$(".col-top").width(),a=$(this).siblings(".dapei-sku-body").position().left,s=parseInt($(this).siblings(".dapei-sku-body").css("width"));s+a>n&&$(this).siblings(".dapei-sku-body").css({right:0});var o=document.documentElement.clientHeight,r=$(this).siblings(".dapei-sku-body").offset().top,l=parseInt($(this).siblings(".dapei-sku-body").css("height")),d=r-(o-l);$("body").scrollTop()<d&&$("body").animate({scrollTop:d},300)}else $(this).attr("show-body","false"),$(this).siblings(".dapei-sku-body").hide();var c=$(this).attr("data-stockId");c?$(this).siblings(".dapei-sku-body").trigger("revertSku",[c]):$(this).siblings(".dapei-sku-body").trigger("revertSku"),t.$dapeiContainer.trigger("dapeiCalPrice")}),$(".dapei-sku-body",t.$dapeiContainer).blur(function(){$(this).siblings(".dapei-sku-select").trigger("click")}),t.$dapeiContainer.off("dapeiCalPrice").on("dapeiCalPrice",function(){$(".dapei-item").each(function(t,e){var i=0,n=0;stockIdArr=[],$(e).find(".dapei-body-items li").each(function(t,e){if($(e).find(".dapei-checkbox input").prop("checked")&&$(e).find(".dapei-sku-select").attr("data-stockid")){var a=$(e).find(".dapei-sku-select");i+=parseInt(a.attr("data-nowprice")),n+=parseInt(a.attr("data-price")),stockIdArr.push({stockId:a.attr("data-stockid"),num:a.attr("data-num")})}}),$(e).find(".dapei-buy .dapei-buy-price-price").text("¥"+i/100),$(e).find(".dapei-buy .dapei-buy-save-price").text((n-i)/100)})}),t.$dapeiContainer.off("dapeiShow").on("dapeiShow",function(t,e,i){var n=$(".dapei-body-items",i).attr("data-page-all");$(".dapei-body-items-item",i).siblings().removeClass("dapei-body-items-item-show"),$('.dapei-body-items-item[data-page="'+e+'"]',i).addClass("dapei-body-items-item-show"),$('.dapei-body-items-item[data-index="true"]',i).addClass("dapei-body-items-item-show"),$(".dapei-body-items",i).attr("data-page-now",e);var a=$(".dapei-page-up",i),s=$(".dapei-page-down",i);a.siblings().removeClass("disabled"),s.siblings().removeClass("disabled"),1==e&&a.addClass("disabled"),e==n&&s.addClass("disabled")}),$(".dapei-checkbox input",t.$dapeiContainer).change(function(){t.$dapeiContainer.trigger("dapeiCalPrice")}),$(".dapei-buy-now",t.$dapeiContainer).off("buynow").on("click.buynow",function(){var e=t._getAjaxParam($(this).parent().parent(".dapei-item"));if(e.canSubmit)return e.count<2?($(".dapei-buy .dapei-buy-tips").show(),void setTimeout(function(){$(".dapei-buy .dapei-buy-tips").hide()},3e3)):void(detailInfo.isLogin?t._submitForm(e,$(this)):(MOGU.user_handsome_login_init(),MOGU.user_handsome_login(!1,{callback:function(){detailInfo.isLogin=!0,t._submitForm(e,$(this))}})))})},_initSku:function(){var t=this;t.skus=[],t.moduleData.collcationSet.forEach(function(t,e){var i=t.promotionMark;t.collocationSetItemGroupDTOs.forEach(function(t,e){var n=t.iid,a=$('.dapei-item[data-mark="'+i+'"] .dapei-sku-body[data-iid="'+n+'"]');new o(a,t)})})},_getAjaxParam:function(t){var e=this,i={},n={},a=[],s=[],o=!0,r={},l={},d=0;t.find(".dapei-body-items-item").each(function(c,u){if($(u).find(".dapei-checkbox input").prop("checked")){var p=$(u).find(".dapei-sku-select"),f=p.attr("data-num"),m=p.attr("data-stockid2"),h=p.attr("data-stockid"),g=t.attr("data-mark");if(d++,!(m&&f&&g)){var v=p.parent(".dapei-body-items-item").attr("data-page");return e.$dapeiContainer.trigger("dapeiShow",[v,t]),p.trigger("click"),o=!1,!1}i[m]=g,n[h]=g,a.push([m,f].join(",")),s.push([h,f].join(",")),r[m]=MGTOOL.getQueryString("ptp"),l[h]=MGTOOL.getQueryString("ptp")}});var c=$(".dapei-container").attr("data-channel");return{params:i,paramsNew:n,postdata:a,postdataNew:s,canSubmit:o,ptp:r,ptpNew:l,channel:c,count:d}},_submitForm:function(t,e){var i=$("<form>"),n=['<input type="hidden" name="postdata" value="'+t.postdataNew.join(",")+'" />','<input type="hidden" name="skuPros" value='+JSON.stringify(t.paramsNew)+" />",'<input type="hidden" name="channel" value="'+t.channel+'" />','<input type="hidden" name="detailrefer" value="'+$("#J_DetailRefer").val()+'">','<input type="hidden" name="marketType" value="market_mogujie">','<input type="hidden" name="ptp" value='+JSON.stringify(t.ptpNew)+">"].join("");i.attr({action:"http://buy.mogujie.com/buy",method:"POST"}).html(n),$("body").append(i),i[0].submit()}};return t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e,i){var n,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=i(49),r=i(50);i(11);n=[],a=function(){var t=function(t,e){this.$container=t,this.$goodsStock=t.find(".stock"),this.$goodsPrice=t.siblings(".dapei-body-items-item-price").find(".dapei-item-price"),this.$goodsNum=t.find(".sku-counter"),this.$bigImg=t.siblings(".dapei-body-items-item-img-a").children(".dapei-body-items-item-img"),this.skuItems={},this.filter={},this.choose=null,this.num=1,this.stock=0,this.skuData=e,this.SkuData=new r,this.domRender=this.render(),this.domRender.init(),this.fn=this.fn(),this.domEvent=this.event(),this.domEvent.init()};return t.prototype.render=function(){var t=this;return{init:function(){t.SkuData.sku.setData(t.skuData),this.sku(),this.stock(t.SkuData.sku.getTotalStock())},sku:function(){var e=t.SkuData.sku.getSkuItems();if("undefined"!=typeof e&&e){var i=e.style,n=t.SkuData.sku.getStyleLen(),a=e.size,s=t.SkuData.sku.getSizeLen(),r=[],l=[];if(i&&n>0){for(var d in i){var c={};if(i[d].img&&""!=i[d].img){var u=i[d].img;u=this._transformImgUrl(u)+"_100x100.jpg",c={className:"img",id:d,title:i[d].style,img:u,bigImg:u}}else c={className:"",id:d,title:i[d].style,img:"",bigImg:""};i[d].disable?c.className=c.className+" disable":1==n&&(c.className=c.className+" c",t.filter.styleId=d),r.push(MoGu.ui.getTemplate(o,c))}t.$container.find(".style").show().find(".J_StyleList").html(r.join(""))}else t.$container.find(".style").hide();if(a&&s>0){for(var d in a){var c={className:"",id:d,title:a[d].size};a[d].disable?c.className=c.className+" disable":1==s&&(c.className=c.className+" c",t.filter.sizeId=d),l.push(MoGu.ui.getTemplate(o,c))}t.$container.find(".size").show().find(".J_SizeList").html(l.join(""))}else t.$container.find(".size").hide();t.skuItems=e,this.fresh()}},fresh:function(){if("undefined"!=typeof t.skuItems&&t.skuItems){var e=t.SkuData.sku.getSkuItem(t.filter,t.skuItems);e&&(this.price(e),e.stock&&this.stock(e.stock),this.list(e),t.choose=e)}},stock:function(e){t.$goodsStock.text(e),t.$goodsNum.attr("data-stock",e),t.$container.trigger("dapeiGetStock",[e]),t.$container.trigger("dapeiChangeNumBtnState",[t.num,e])},list:function(e){var i=e.stocks,n=0;if(i){for(var a in i){n+=i[a];var s=t.$container.find('li[data-id="'+a+'"]');0===i[a]?s.addClass("disable"):s.removeClass("disable")}!e.stock&&this.stock(n)}},price:function(e){function i(t,e){for(var i in t)var n=t[i],a=t[i];for(var i in t)t.hasOwnProperty(i)&&(t[i]>a&&(a=t[i]),t[i]<n&&(n=t[i]));return n===a?e+n/100:e+""+n/100+"~"+e+a/100}"undefined"!=typeof e&&e&&e.nowprice&&("object"!=s(e.nowprice)&&e.isDefault?t.$goodsPrice.text(e.nowprice):"object"==s(e.nowprice)?t.$goodsPrice.text(i(e.nowprice,e.currency)):t.$goodsPrice.text(e.currency+e.nowprice/100))},_transformImgUrl:function(t){var e=t.split("/"),i=e.slice(0,-1),n=e.slice(-1)[0],a=n.split("_");return a.length>3?(i.push(a.slice(0,3).join("_")),i.join("/")):t}}},t.prototype.event=function(){var t=this;return{init:function(){this.dapeiUpdateSku(),this.chooseSku(),this.dapeiGetNum(),this.dapeiGetStock(),this.stockTip(),this.closeSku(),this.revertSku(),this.changeSku(),this.changeSkuForPrimary(),this.confirmSku()},chooseSku:function(){t.$container.on("click","ul li:not(.disable)",function(){t.$container.trigger("dapeiUpdateSku",[$(this)]),"true"===t.$container.parent().attr("data-index")&&$("body").trigger("primarySkuSelect",[t.filter])})},dapeiUpdateSku:function(){t.$container.on("dapeiUpdateSku",function(e,i){var n=i.closest("ul");if(i.hasClass("c")){if(n.hasClass("J_StyleList")){if(1===t.SkuData.sku.getStyleLen())return;if(i.removeClass("c"),delete t.filter.styleId,t.domRender.sku(),t.SkuData.sku.getSizeLen()>0&&t.filter.sizeId){var a=t.$container.find('.J_SizeList li[data-id="'+t.filter.sizeId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[a])}i.hasClass("img")&&(t.$bigImg[0].src=t.$bigImg.attr("data-src"))}if(n.hasClass("J_SizeList")){if(1===t.SkuData.sku.getSizeLen())return;if(i.removeClass("c"),delete t.filter.sizeId,t.domRender.sku(),t.SkuData.sku.getStyleLen()>0&&t.filter.styleId){var s=t.$container.find('.J_StyleList li[data-id="'+t.filter.styleId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[s])}}}else i.addClass("c").siblings().removeClass("c"),n.hasClass("J_StyleList")&&(t.filter.styleId=i.data("id"),t.filter.type="style",i.hasClass("img")&&(t.$bigImg[0].src=i.children("img")[0].src.replace("100x100","160x160"))),n.hasClass("J_SizeList")&&(t.filter.sizeId=i.data("id"),t.filter.type="size"),t.domRender.fresh()})},dapeiGetNum:function(){t.$container.on("dapeiGetNum",function(e,i){t.num=i})},dapeiGetStock:function(){t.$container.on("dapeiGetStock",function(e,i){t.stock=i})},confirmSku:function(){t.$container.find(".pannel-action .confirm").on("click",function(e,i){if(t.choose&&t.choose.size&&t.choose.style&&t.choose.stockId){var n=1;if(t.$container.trigger("stockTip",[n,t.choose.stock,t.$goodsNum]),!t.choose.isStock||!t.fn.checkChooseSku())return;t.$container.siblings(".dapei-sku-select").find("span").text(t.choose.size+","+t.choose.style+","+n+"件"),t.$container.siblings(".dapei-sku-select").attr("data-stockId",t.choose.stockId),t.$container.siblings(".dapei-sku-select").attr("data-stockId2",t.choose.stockId2),t.$container.siblings(".dapei-sku-select").attr("data-price",t.choose.price),t.$container.siblings(".dapei-sku-select").attr("data-nowprice",t.choose.nowprice),t.$container.siblings(".dapei-sku-select").attr("data-num",t.choose.num),"true"===i?t.$container.siblings(".dapei-sku-select").trigger("click",["true"]):t.$container.siblings(".dapei-sku-select").trigger("click")}else t.$container.find(".J_GoodsStockTip").text("请选择颜色和尺码!").show(),setTimeout(function(){t.$container.find(".J_GoodsStockTip").hide()},3e3)}).trigger("click",["true"])},closeSku:function(){t.$container.find(".pannel-close").on("click",function(){t.$container.siblings(".dapei-sku-select").trigger("click")})},stockTip:function(){t.$container.on("stockTip",function(e,i,n,a){var s=a?a.siblings(".goods-stock-tip"):$goodsSku.find(".J_GoodsStockTip");t.choose.num=i,t.$container.find(".J_GoodsStockTip").text("您所填写的商品数量超过库存!"),+i>+n?(s.show(),t.choose.isStock=!1):(s.hide(),t.choose.isStock=!0)})},revertSku:function(){t.$container.on("revertSku",function(e,i){if(i){var n=t.SkuData.sku.getSkuIdFromStockId(i),a=t.$container.find('.J_SizeList li[data-id="'+n.sizeId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[a]);var s=t.$container.find('.J_StyleList li[data-id="'+n.styleId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[s])}else{var a=t.$container.find('.J_SizeList li[data-id="'+t.filter.sizeId+'"]');t.$container.trigger("dapeiUpdateSku",[a]);var s=t.$container.find('.J_StyleList li[data-id="'+t.filter.styleId+'"]');t.$container.trigger("dapeiUpdateSku",[s])}})},changeSku:function(){t.$container.on("changeSku",function(e,i){var n=t.$container.find('.J_SizeList li[data-id="'+i.sizeId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[n]);var a=t.$container.find('.J_StyleList li[data-id="'+i.styleId+'"]').removeClass("c");t.$container.trigger("dapeiUpdateSku",[a]),t.$container.find(".pannel-action .confirm").trigger("click",["true"])})},changeSkuForPrimary:function(){$("body").on("primarySkuSelect",function(t,e){$("#J_GoodsSku").trigger("changeSku",[e])})}}},t.prototype.fn=function(){var t=this;return{getChooseStockId:function(){return t.choose?t.choose.stockId||{}:void 0},checkChooseSku:function(){var e=t.SkuData.sku.getStyleLen(),i=t.SkuData.sku.getSizeLen();if(e>0&&i>0)return t.filter.styleId&&t.filter.sizeId?1:0;if(e>0&&0>=i)return t.filter.styleId?1:0;if(0>=e&&i>0)return t.filter.sizeId?1:0;if(0>=e&&0>=i){var n=t.skuData;return n&&1==n.length?(t.choose=n[0],1):0}}}},t}.apply(e,n),!(void 0!==a&&(t.exports=a))},function(t,e){t.exports='<li class="{{=it.className}}" data-id="{{=it.id}}" title="{{=it.title}}" alt="{{=it.title}}">\n	{{?it.img && it.img != \'\'}}\n		<img src="{{=it.img}}" alt="{{=it.title}}">\n		<b></b>\n	{{??}}\n    	{{=it.title}}\n    {{?}}\n</li>'},function(t,e,i){var n;n=function(){var t=function(){this.skuData=null,this.originData=null,this.data={},this.sku=this.fn(),this.parseSkuData=function(){if("undefined"!=typeof this.skuData&&this.skuData){for(var t=this.skuData,e=[],i=[],n=[],a=[],s=0,o=t.length-1;o>=0;o--)t[o].styleId&&(e.push(t[o].styleId),i.push(t[o].img)),t[o].sizeId&&(n.push(t[o].sizeId),a.push(t[o].size)),s+=t[o].stock||0;return e=this.unique(e),n=this.unique(n),this.data.styleLen=e.length,this.data.sizeLen=n.length,this.data.totalStock=s,{styleIds:e,sizeIds:n}}},this.procssSkuData=function(t){if("undefined"!=typeof this.skuData&&this.skuData){var e=this.skuData;return t.styleIds.length>0&&e.sort(function(e,i){return e.styleId<i.styleId?-1:e.styleId>i.styleId?1:t.sizeIds.length>0?e.sizeId>i.sizeId?1:-1:0}),e}},this.isData=function(t){return"undefined"!=typeof t&&t&&!(t.length<=0)},this.unique=function(t){t=t.slice().sort(function(t,e){return t>e?1:-1});for(var e,i,n=0,a=t.length;a>n;n++){for(e=n,i=t[n];a>e+1&&t[e+1]===i;)e++;e-n&&(e-=n,t.splice(n+1,e),a-=e)}return t}};return t.prototype.fn=function(){var t=this,e={setData:function(e){t.isData(e)&&(t.originData=e,t.data={iid:e.iid,img:e.img,title:e.title,defaultPrice:e.defaultPrice},t.skuData=e.sku)},getDefaultPrice:function(){return"undefined"!=typeof t.data.defaultPrice?t.data.defaultPrice:void 0},getTotalStock:function(){return"undefined"!=typeof t.data.totalStock?t.data.totalStock:void 0},getStyleLen:function(){return t.data.styleLen?t.data.styleLen:0},getSizeLen:function(){return t.data.sizeLen?t.data.sizeLen:0},getSkuIdFromStockId:function(e){var i={};return t.skuData.forEach(function(t,n){return t.stockId===e?(i={sizeId:t.sizeId,styleId:t.styleId},!0):void 0}),i},getSkuItem:function(t,e){if(t||e){var i={};return i=t.styleId&&t.sizeId?"style"==t.type?{price:e.style[t.styleId].price[t.sizeId],nowprice:e.style[t.styleId].nowprice[t.sizeId],style:e.style[t.styleId].style,stock:e.style[t.styleId].stocks[t.sizeId],stocks:e.style[t.styleId].stocks,size:e.style[t.styleId].sizeVals[t.sizeId],stockId:e.style[t.styleId].stockId[t.sizeId],stockId2:e.style[t.styleId].stockId2[t.sizeId],currency:e.style[t.styleId].currency}:{price:e.size[t.sizeId].price[t.styleId],nowprice:e.size[t.sizeId].nowprice[t.styleId],size:e.size[t.sizeId].size,stock:e.size[t.sizeId].stocks[t.styleId],stocks:e.size[t.sizeId].stocks,style:e.size[t.sizeId].styleVals[t.styleId],stockId:e.size[t.sizeId].stockId[t.styleId],stockId2:e.size[t.sizeId].stockId2[t.styleId],currency:e.size[t.sizeId].currency}:t.styleId?e.style[t.styleId]:t.sizeId?e.size[t.sizeId]:{stock:this.getTotalStock(),nowprice:this.getDefaultPrice(),isDefault:!0}}},getSkuItems:function(){var e=t.parseSkuData();if("undefined"!=typeof e&&e){var i=t.procssSkuData(e),n=e.styleIds,a=e.sizeIds,s=n.length,o=a.length,r={style:{},size:{}};if(s>0)if(o>0)for(var l=0,d=s;d>l;l++){r.style[n[l]]={},r.style[n[l]].stockId={},r.style[n[l]].stockId2={},r.style[n[l]].stocks={},r.style[n[l]].sizeVals={},r.style[n[l]].price={},r.style[n[l]].nowprice={};for(var c=0,u=l*o,p=(l+1)*o;p>u;u++)r.style[n[l]].stockId[i[u].sizeId]=i[u].stockId,r.style[n[l]].stockId2[i[u].sizeId]=i[u].stockId2,r.style[n[l]].stocks[i[u].sizeId]=i[u].stock,r.style[n[l]].sizeVals[i[u].sizeId]=i[u].size,r.style[n[l]].price[i[u].sizeId]=i[u].price,r.style[n[l]].nowprice[i[u].sizeId]=i[u].nowprice,r.style[n[l]].style=i[u].style,r.style[n[l]].img=i[u].img,r.style[n[l]].currency=i[u].currency,0===i[u].stock&&++c;c==o&&(r.style[n[l]].disable=!0)}else for(var l=0,d=s;d>l;l++)r.style[n[l]]={},r.style[n[l]].stockId=i[l].stockId,r.style[n[l]].stockId2=i[l].stockId2,r.style[n[l]].stock=i[l].stock,r.style[n[l]].style=i[l].style,r.style[n[l]].price=i[l].price,r.style[n[l]].nowprice=i[l].nowprice,r.style[n[l]].img=i[l].img,r.style[n[l]].currency=i[l].currency,0===i[l].stock&&(r.style[n[l]].disable=!0);if(o>0)if(s>0)for(var l=0,d=o;d>l;l++){r.size[a[l]]={},r.size[a[l]].stockId={},r.size[a[l]].stockId2={},r.size[a[l]].stocks={},r.size[a[l]].styleVals={},r.size[a[l]].price={},r.size[a[l]].nowprice={};for(var c=0,u=0,p=s;p>u;u++){var f=u*o+l;r.size[a[l]].stockId[i[f].styleId]=i[f].stockId,r.size[a[l]].stockId2[i[f].styleId]=i[f].stockId2,r.size[a[l]].stocks[i[f].styleId]=i[f].stock,r.size[a[l]].styleVals[i[f].styleId]=i[f].style,r.size[a[l]].nowprice[i[f].styleId]=i[f].nowprice,r.size[a[l]].price[i[f].styleId]=i[f].price,r.size[a[l]].size=i[f].size,r.size[a[l]].img=i[f].img,r.size[a[l]].currency=i[f].currency,0===i[f].stock&&++c}c==s&&(r.size[a[l]].disable=!0)}else for(var l=0,d=o;d>l;l++)r.size[a[l]]={},r.size[a[l]].stockId=i[l].stockId,r.size[a[l]].stockId2=i[l].stockId2,r.size[a[l]].stock=i[l].stock,r.size[a[l]].size=i[l].size,r.size[a[l]].nowprice=i[l].nowprice,r.size[a[l]].price=i[l].price,r.size[a[l]].img=i[l].img,r.size[a[l]].currency=i[l].currency,0===i[l].stock&&(r.size[a[l]].disable=!0);return r}}};return e},t}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports='<!-- 搭配购 -->\n{{?it.collcationSet.length > 0}}\n<div class="dapei-container" data-channel="{{=it.channel}}">\n	<div class="dapei-tab">\n		<ul>\n			{{~it.collcationSet: dapeiItem: dapeiIndex}}\n				<li class="dapei-tab-item{{?dapeiIndex == 0}} active{{?}}" data-index="{{=dapeiIndex}}" data-mark="{{=dapeiItem.promotionMark}}">{{=dapeiItem.name}}</li>\n			{{~}}\n		</ul>\n	</div>\n	<div class="dapei-body">\n		{{~it.collcationSet: dapeiItem: dapeiIndex}}\n		<div class="dapei-item{{?dapeiIndex == 0}} dapei-show{{??}} dapei-hide{{?}}" data-index="{{=dapeiIndex}}" data-mark="{{=dapeiItem.promotionMark}}">\n				{{\n					var len = dapeiItem.collocationSetItemGroupDTOs.length - 1;\n					var pageSize = 4;\n					var page = len % pageSize > 0? parseInt((len / pageSize), 10) + 1 : len / pageSize;\n					var pageNow = 1;\n					var defaultPage = 1;\n					var _transformImgUrl = function (imgUrl) {\n		                var urlArr = imgUrl.split(\'/\');\n		                var urlHead = urlArr.slice(0, -1);\n		                var urlId = urlArr.slice(-1)[0];\n		                var urlIdArr = urlId.split(\'_\');\n		                if (urlIdArr.length > 3) {\n		                    urlHead.push(urlIdArr.slice(0, 3).join(\'_\'));\n		                    return urlHead.join(\'/\');\n		                } else {\n		                    return imgUrl;\n		                }\n		            };\n				}}\n			<ul class="dapei-body-items" data-page-now="{{=defaultPage}}" data-page-all="{{=page}}">\n				{{~dapeiItem.collocationSetItemGroupDTOs: item:index}}\n					{{?(index - 1) <= (pageNow * pageSize) - 1 && (index - 1) >= (pageNow - 1) * pageSize || index == 0}}\n					<li iid="{{=item.iid}}" class="dapei-body-items-item{{?pageNow == defaultPage}} dapei-body-items-item-show{{?}}" data-page="{{=pageNow}}" data-index="{{?index == 0}}true{{??}}false{{?}}">\n						<a href="http://shop.mogujie.com/detail/{{=item.iid}}" class="dapei-body-items-item-img-a">\n							<img src="{{=_transformImgUrl(item.img) + \'_160x160.jpg\'}}" alt="{{=item.title}}" class="dapei-body-items-item-img" data-src="{{=_transformImgUrl(item.img) + \'_160x160.jpg\'}}" />\n						</a>\n						<span class="dapei-body-items-item-price">\n							<span class="dapei-checkbox"><input type="checkbox"{{?index == 0}} checked="checked" disabled{{?}} ></span>\n							<span class="dapei-item-price">{{=item.defaultPrice}}</span>\n						</span>\n						\n						<div class="dapei-sku-select" show-body="false"><span>选择颜色规格</span><i class="drop-down-before"></i><i class="drop-down"></i></div>\n						<!-- SKU -->\n						<div class="dapei-sku-body" data-iid="{{=item.iid}}">\n							<div class="content">\n								<div class="pannel-title">\n									<span class="pannel-title-text">选择商品信息</span>\n									<b class="pannel-close">╳</b>\n								</div>\n								<div class="pannel-box">\n									<div class="sku-list">\n										<dl class="size clearfix">\n											<dt class="sku-text">{{=item.sizeKey}}</dt>\n											<dd>\n												<ul class="J_SizeList size-list clearfix">\n					                                <!-- 尺码 -->\n					                            </ul>\n				                            </dd>\n										</dl>\n										<dl class="style clearfix">\n											<dt class="sku-text">{{=item.styleKey}}</dt>\n											<dd>\n												<ul class="J_StyleList style-list clearfix">\n													<!-- 颜色 -->\n					                            </ul>\n				                            </dd>\n										</dl>\n									</div>\n									<dl class="sku-num">\n						                <dt class="title">数量:</dt>\n						                <dd class="clearfix sku-num-body">\n						                    <div class="sku-counter fl">\n						                    	<span class="num-reduce fl num-disable"></span>\n						                        <input class="num-input" type="text" value="1" disabled />\n						                        <span class="num-add fl num-disable"></span>\n						                        <!-- <span class="dapei-num">1</span> -->\n						                    </div>\n						                    <div class="sku-stock fl">库存<span class="stock"></span>件</div>\n						                    <div class="J_GoodsStockTip goods-stock-tip fl" style="display: none;">您所填写的商品数量超过库存！</div>\n						                </dd>\n						            </dl>\n								</div>\n								<div class="pannel-action">\n									<span class="confirm btn">确定</span>\n								</div>\n							</div>\n						</div>\n						{{?index == 0}}\n						<span class="dapei-plus">+</span>\n						{{?}}\n					</li>\n					{{?}}\n					{{\n						pageNow = index - 1 >= (pageNow * pageSize) - 1? pageNow + 1 : pageNow;\n					}}\n				{{~}}\n			</ul>\n			{{?dapeiItem.collocationSetItemGroupDTOs.length > 5}}\n			<div class="dapei-page">\n				<span class="dapei-page-up disabled"><i class="dapei-page-up-before"></i><i class="dapei-page-up-after"></i></span>\n				<span class="dapei-page-down"><i class="dapei-page-down-before"></i><i class="dapei-page-down-after"></i></span>\n			</div>\n			{{?}}\n			<div class="dapei-buy">\n				<div class="dapei-buy-price"><span class="dapei-buy-price-text">优惠搭配价格：</span><span class="dapei-buy-price-price">¥0</span></div>\n				<div class="dapei-buy-save"><span class="dapei-buy-save-text">为您节省¥</span><span class="dapei-buy-save-price">0</span></div>\n				<div class="dapei-buy-now"><span class="dapei-buy-now-btn">立即购买</span></div>\n				<div class="dapei-buy-tips">请确保选择至少一件搭配商品！</div>\n			</div>\n		</div>\n		{{~}}\n	</div>\n</div>\n{{?}}'}])}),"function"==typeof define&&define.amd&&require(["pc/pages/normal/index"]);